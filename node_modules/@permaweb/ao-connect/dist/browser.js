var is=Object.create;var ln=Object.defineProperty;var os=Object.getOwnPropertyDescriptor;var as=Object.getOwnPropertyNames;var ss=Object.getPrototypeOf,us=Object.prototype.hasOwnProperty;var Ut=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),fs=(r,e)=>{for(var t in e)ln(r,t,{get:e[t],enumerable:!0})},cs=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of as(e))!us.call(r,i)&&i!==t&&ln(r,i,{get:()=>e[i],enumerable:!(n=os(e,i))||n.enumerable});return r};var ki=(r,e,t)=>(t=r!=null?is(ss(r)):{},cs(e||!r||!r.__esModule?ln(t,"default",{value:r,enumerable:!0}):t,r));var $o=Ut((Qy,Do)=>{var Gt=1e3,Yt=Gt*60,Ht=Yt*60,Tt=Ht*24,Kc=Tt*7,Xc=Tt*365.25;Do.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Jc(r);if(t==="number"&&isFinite(r))return e.long?el(r):Qc(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Jc(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Xc;case"weeks":case"week":case"w":return t*Kc;case"days":case"day":case"d":return t*Tt;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ht;case"minutes":case"minute":case"mins":case"min":case"m":return t*Yt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Gt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Qc(r){var e=Math.abs(r);return e>=Tt?Math.round(r/Tt)+"d":e>=Ht?Math.round(r/Ht)+"h":e>=Yt?Math.round(r/Yt)+"m":e>=Gt?Math.round(r/Gt)+"s":r+"ms"}function el(r){var e=Math.abs(r);return e>=Tt?Xr(r,e,Tt,"day"):e>=Ht?Xr(r,e,Ht,"hour"):e>=Yt?Xr(r,e,Yt,"minute"):e>=Gt?Xr(r,e,Gt,"second"):r+" ms"}function Xr(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var zo=Ut((e0,Wo)=>{function tl(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=s,t.humanize=$o(),t.destroy=p,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let g=0;for(let v=0;v<m.length;v++)g=(g<<5)-g+m.charCodeAt(v),g|=0;return t.colors[Math.abs(g)%t.colors.length]}t.selectColor=e;function t(m){let g,v=null,S,T;function E(...B){if(!E.enabled)return;let C=E,N=Number(new Date),D=N-(g||N);C.diff=D,C.prev=g,C.curr=N,g=N,B[0]=t.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let L=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(z,le)=>{if(z==="%%")return"%";L++;let rt=t.formatters[le];if(typeof rt=="function"){let Ot=B[L];z=rt.call(C,Ot),B.splice(L,1),L--}return z}),t.formatArgs.call(C,B),(C.log||t.log).apply(C,B)}return E.namespace=m,E.useColors=t.useColors(),E.color=t.selectColor(m),E.extend=n,E.destroy=t.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(S!==t.namespaces&&(S=t.namespaces,T=t.enabled(m)),T),set:B=>{v=B}}),typeof t.init=="function"&&t.init(E),E}function n(m,g){let v=t(this.namespace+(typeof g>"u"?":":g)+m);return v.log=this.log,v}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let g,v=(typeof m=="string"?m:"").split(/[\s,]+/),S=v.length;for(g=0;g<S;g++)v[g]&&(m=v[g].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(u),...t.skips.map(u).map(g=>"-"+g)].join(",");return t.enable(""),m}function s(m){if(m[m.length-1]==="*")return!0;let g,v;for(g=0,v=t.skips.length;g<v;g++)if(t.skips[g].test(m))return!1;for(g=0,v=t.names.length;g<v;g++)if(t.names[g].test(m))return!0;return!1}function u(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function l(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Wo.exports=tl});var Zo=Ut((me,Jr)=>{me.formatArgs=nl;me.save=il;me.load=ol;me.useColors=rl;me.storage=al();me.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();me.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function rl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function nl(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Jr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}me.log=console.debug||console.log||(()=>{});function il(r){try{r?me.storage.setItem("debug",r):me.storage.removeItem("debug")}catch{}}function ol(){let r;try{r=me.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function al(){try{return localStorage}catch{}}Jr.exports=zo()(me);var{formatters:sl}=Jr.exports;sl.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var la=Ut(tn=>{"use strict";tn.byteLength=Sl;tn.toByteArray=Tl;tn.fromByteArray=Cl;var ke=[],ve=[],El=typeof Uint8Array<"u"?Uint8Array:Array,ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Bt=0,fa=ni.length;Bt<fa;++Bt)ke[Bt]=ni[Bt],ve[ni.charCodeAt(Bt)]=Bt;var Bt,fa;ve[45]=62;ve[95]=63;function ca(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Sl(r){var e=ca(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Al(r,e,t){return(e+t)*3/4-t}function Tl(r){var e,t=ca(r),n=t[0],i=t[1],o=new El(Al(r,n,i)),s=0,u=i>0?n-4:n,l;for(l=0;l<u;l+=4)e=ve[r.charCodeAt(l)]<<18|ve[r.charCodeAt(l+1)]<<12|ve[r.charCodeAt(l+2)]<<6|ve[r.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=ve[r.charCodeAt(l)]<<2|ve[r.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=ve[r.charCodeAt(l)]<<10|ve[r.charCodeAt(l+1)]<<4|ve[r.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Bl(r){return ke[r>>18&63]+ke[r>>12&63]+ke[r>>6&63]+ke[r&63]}function Il(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Bl(n));return i.join("")}function Cl(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,u=t-n;s<u;s+=o)i.push(Il(r,s,s+o>u?u:s+o));return n===1?(e=r[t-1],i.push(ke[e>>2]+ke[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ke[e>>10]+ke[e>>4&63]+ke[e<<2&63]+"=")),i.join("")}});var ha=Ut(ii=>{ii.read=function(r,e,t,n,i){var o,s,u=i*8-n-1,l=(1<<u)-1,p=l>>1,m=-7,g=t?i-1:0,v=t?-1:1,S=r[e+g];for(g+=v,o=S&(1<<-m)-1,S>>=-m,m+=u;m>0;o=o*256+r[e+g],g+=v,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=n;m>0;s=s*256+r[e+g],g+=v,m-=8);if(o===0)o=1-p;else{if(o===l)return s?NaN:(S?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-p}return(S?-1:1)*s*Math.pow(2,o-n)};ii.write=function(r,e,t,n,i,o){var s,u,l,p=o*8-i-1,m=(1<<p)-1,g=m>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:o-1,T=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+g>=1?e+=v/l:e+=v*Math.pow(2,1-g),e*l>=2&&(s++,l/=2),s+g>=m?(u=0,s=m):s+g>=1?(u=(e*l-1)*Math.pow(2,i),s=s+g):(u=e*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;r[t+S]=u&255,S+=T,u/=256,i-=8);for(s=s<<i|u,p+=i;p>0;r[t+S]=s&255,S+=T,s/=256,p-=8);r[t+S-T]|=E*128}});var Ca=Ut(tr=>{"use strict";var oi=la(),Qt=ha(),pa=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;tr.Buffer=y;tr.SlowBuffer=jl;tr.INSPECT_MAX_BYTES=50;var rn=2147483647;tr.kMaxLength=rn;y.TYPED_ARRAY_SUPPORT=Ol();!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ol(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}});Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function ze(r){if(r>rn)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,y.prototype),e}function y(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return fi(r)}return ya(r,e,t)}y.poolSize=8192;function ya(r,e,t){if(typeof r=="string")return Rl(r,e);if(ArrayBuffer.isView(r))return Ul(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Re(r,ArrayBuffer)||r&&Re(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(r,SharedArrayBuffer)||r&&Re(r.buffer,SharedArrayBuffer)))return si(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return y.from(n,e,t);let i=Fl(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return y.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}y.from=function(r,e,t){return ya(r,e,t)};Object.setPrototypeOf(y.prototype,Uint8Array.prototype);Object.setPrototypeOf(y,Uint8Array);function wa(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function kl(r,e,t){return wa(r),r<=0?ze(r):e!==void 0?typeof t=="string"?ze(r).fill(e,t):ze(r).fill(e):ze(r)}y.alloc=function(r,e,t){return kl(r,e,t)};function fi(r){return wa(r),ze(r<0?0:ci(r)|0)}y.allocUnsafe=function(r){return fi(r)};y.allocUnsafeSlow=function(r){return fi(r)};function Rl(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=va(r,e)|0,n=ze(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function ai(r){let e=r.length<0?0:ci(r.length)|0,t=ze(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Ul(r){if(Re(r,Uint8Array)){let e=new Uint8Array(r);return si(e.buffer,e.byteOffset,e.byteLength)}return ai(r)}function si(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,y.prototype),n}function Fl(r){if(y.isBuffer(r)){let e=ci(r.length)|0,t=ze(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||hi(r.length)?ze(0):ai(r);if(r.type==="Buffer"&&Array.isArray(r.data))return ai(r.data)}function ci(r){if(r>=rn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rn.toString(16)+" bytes");return r|0}function jl(r){return+r!=r&&(r=0),y.alloc(+r)}y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==y.prototype};y.compare=function(e,t){if(Re(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),Re(t,Uint8Array)&&(t=y.from(t,t.offset,t.byteLength)),!y.isBuffer(e)||!y.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};y.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return y.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=y.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(Re(s,Uint8Array))o+s.length>i.length?(y.isBuffer(s)||(s=y.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(y.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function va(r,e){if(y.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Re(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return ui(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ia(r).length;default:if(i)return n?-1:ui(r).length;e=(""+e).toLowerCase(),i=!0}}y.byteLength=va;function Ll(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Vl(this,e,t);case"utf8":case"utf-8":return _a(this,e,t);case"ascii":return Zl(this,e,t);case"latin1":case"binary":return ql(this,e,t);case"base64":return Wl(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gl(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}y.prototype._isBuffer=!0;function It(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}y.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)It(this,t,t+1);return this};y.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)It(this,t,t+3),It(this,t+1,t+2);return this};y.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)It(this,t,t+7),It(this,t+1,t+6),It(this,t+2,t+5),It(this,t+3,t+4);return this};y.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?_a(this,0,e):Ll.apply(this,arguments)};y.prototype.toLocaleString=y.prototype.toString;y.prototype.equals=function(e){if(!y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:y.compare(this,e)===0};y.prototype.inspect=function(){let e="",t=tr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};pa&&(y.prototype[pa]=y.prototype.inspect);y.prototype.compare=function(e,t,n,i,o){if(Re(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),!y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,u=n-t,l=Math.min(s,u),p=this.slice(i,o),m=e.slice(t,n);for(let g=0;g<l;++g)if(p[g]!==m[g]){s=p[g],u=m[g];break}return s<u?-1:u<s?1:0};function xa(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,hi(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=y.from(e,n)),y.isBuffer(e))return e.length===0?-1:da(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):da(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function da(r,e,t,n,i){let o=1,s=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function l(m,g){return o===1?m[g]:m.readUInt16BE(g*o)}let p;if(i){let m=-1;for(p=t;p<s;p++)if(l(r,p)===l(e,m===-1?0:p-m)){if(m===-1&&(m=p),p-m+1===u)return m*o}else m!==-1&&(p-=p-m),m=-1}else for(t+u>s&&(t=s-u),p=t;p>=0;p--){let m=!0;for(let g=0;g<u;g++)if(l(r,p+g)!==l(e,g)){m=!1;break}if(m)return p}return-1}y.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};y.prototype.indexOf=function(e,t,n){return xa(this,e,t,n,!0)};y.prototype.lastIndexOf=function(e,t,n){return xa(this,e,t,n,!1)};function Nl(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(hi(u))return s;r[t+s]=u}return s}function Pl(r,e,t,n){return nn(ui(e,r.length-t),r,t,n)}function Ml(r,e,t,n){return nn(Xl(e),r,t,n)}function Dl(r,e,t,n){return nn(Ia(e),r,t,n)}function $l(r,e,t,n){return nn(Jl(e,r.length-t),r,t,n)}y.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Nl(this,e,t,n);case"utf8":case"utf-8":return Pl(this,e,t,n);case"ascii":case"latin1":case"binary":return Ml(this,e,t,n);case"base64":return Dl(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $l(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Wl(r,e,t){return e===0&&t===r.length?oi.fromByteArray(r):oi.fromByteArray(r.slice(e,t))}function _a(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let l,p,m,g;switch(u){case 1:o<128&&(s=o);break;case 2:l=r[i+1],(l&192)===128&&(g=(o&31)<<6|l&63,g>127&&(s=g));break;case 3:l=r[i+1],p=r[i+2],(l&192)===128&&(p&192)===128&&(g=(o&15)<<12|(l&63)<<6|p&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:l=r[i+1],p=r[i+2],m=r[i+3],(l&192)===128&&(p&192)===128&&(m&192)===128&&(g=(o&15)<<18|(l&63)<<12|(p&63)<<6|m&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return zl(n)}var ma=4096;function zl(r){let e=r.length;if(e<=ma)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ma));return t}function Zl(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function ql(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Vl(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=Ql[r[o]];return i}function Gl(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}y.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,y.prototype),i};function Q(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Q(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};y.prototype.readUintBE=y.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Q(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};y.prototype.readUint8=y.prototype.readUInt8=function(e,t){return e=e>>>0,t||Q(e,1,this.length),this[e]};y.prototype.readUint16LE=y.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Q(e,2,this.length),this[e]|this[e+1]<<8};y.prototype.readUint16BE=y.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Q(e,2,this.length),this[e]<<8|this[e+1]};y.prototype.readUint32LE=y.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};y.prototype.readUint32BE=y.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};y.prototype.readBigUInt64LE=et(function(e){e=e>>>0,er(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Sr(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});y.prototype.readBigUInt64BE=et(function(e){e=e>>>0,er(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Sr(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});y.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Q(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};y.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Q(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};y.prototype.readInt8=function(e,t){return e=e>>>0,t||Q(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};y.prototype.readInt16LE=function(e,t){e=e>>>0,t||Q(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};y.prototype.readInt16BE=function(e,t){e=e>>>0,t||Q(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};y.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};y.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};y.prototype.readBigInt64LE=et(function(e){e=e>>>0,er(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Sr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});y.prototype.readBigInt64BE=et(function(e){e=e>>>0,er(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Sr(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});y.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),Qt.read(this,e,!0,23,4)};y.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Q(e,4,this.length),Qt.read(this,e,!1,23,4)};y.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Q(e,8,this.length),Qt.read(this,e,!0,52,8)};y.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Q(e,8,this.length),Qt.read(this,e,!1,52,8)};function ce(r,e,t,n,i,o){if(!y.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;ce(this,e,t,n,u,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};y.prototype.writeUintBE=y.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;ce(this,e,t,n,u,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};y.prototype.writeUint8=y.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,1,255,0),this[t]=e&255,t+1};y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ba(r,e,t,n,i){Ba(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Ea(r,e,t,n,i){Ba(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}y.prototype.writeBigUInt64LE=et(function(e,t=0){return ba(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeBigUInt64BE=et(function(e,t=0){return Ea(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);ce(this,e,t,n,l-1,-l)}let o=0,s=1,u=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};y.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);ce(this,e,t,n,l-1,-l)}let o=n-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};y.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};y.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};y.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};y.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};y.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ce(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};y.prototype.writeBigInt64LE=et(function(e,t=0){return ba(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});y.prototype.writeBigInt64BE=et(function(e,t=0){return Ea(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Sa(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Aa(r,e,t,n,i){return e=+e,t=t>>>0,i||Sa(r,e,t,4,34028234663852886e22,-34028234663852886e22),Qt.write(r,e,t,n,23,4),t+4}y.prototype.writeFloatLE=function(e,t,n){return Aa(this,e,t,!0,n)};y.prototype.writeFloatBE=function(e,t,n){return Aa(this,e,t,!1,n)};function Ta(r,e,t,n,i){return e=+e,t=t>>>0,i||Sa(r,e,t,8,17976931348623157e292,-17976931348623157e292),Qt.write(r,e,t,n,52,8),t+8}y.prototype.writeDoubleLE=function(e,t,n){return Ta(this,e,t,!0,n)};y.prototype.writeDoubleBE=function(e,t,n){return Ta(this,e,t,!1,n)};y.prototype.copy=function(e,t,n,i){if(!y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};y.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!y.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=y.isBuffer(e)?e:y.from(e,i),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var Jt={};function li(r,e,t){Jt[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}li("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);li("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);li("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=ga(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=ga(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ga(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Yl(r,e,t){er(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Sr(e,r.length-(t+1))}function Ba(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new Jt.ERR_OUT_OF_RANGE("value",u,r)}Yl(n,i,o)}function er(r,e){if(typeof r!="number")throw new Jt.ERR_INVALID_ARG_TYPE(e,"number",r)}function Sr(r,e,t){throw Math.floor(r)!==r?(er(r,t),new Jt.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Jt.ERR_BUFFER_OUT_OF_BOUNDS:new Jt.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var Hl=/[^+/0-9A-Za-z-_]/g;function Kl(r){if(r=r.split("=")[0],r=r.trim().replace(Hl,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ui(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Xl(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Jl(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Ia(r){return oi.toByteArray(Kl(r))}function nn(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Re(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function hi(r){return r!==r}var Ql=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function et(r){return typeof BigInt>"u"?eh:r}function eh(){throw new Error("BigInt not supported")}});function G(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function re(r){return function e(t){return arguments.length===0||G(t)?e:r.apply(this,arguments)}}function K(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return G(t)?e:re(function(i){return r(t,i)});default:return G(t)&&G(n)?e:G(t)?re(function(i){return r(i,n)}):G(n)?re(function(i){return r(t,i)}):r(t,n)}}}function kr(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,o){return e.apply(this,arguments)};case 5:return function(t,n,i,o,s){return e.apply(this,arguments)};case 6:return function(t,n,i,o,s,u){return e.apply(this,arguments)};case 7:return function(t,n,i,o,s,u,l){return e.apply(this,arguments)};case 8:return function(t,n,i,o,s,u,l,p){return e.apply(this,arguments)};case 9:return function(t,n,i,o,s,u,l,p,m){return e.apply(this,arguments)};case 10:return function(t,n,i,o,s,u,l,p,m,g){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Wi(r,e,t){return function(){for(var n=[],i=0,o=r,s=0,u=!1;s<e.length||i<arguments.length;){var l;s<e.length&&(!G(e[s])||i>=arguments.length)?l=e[s]:(l=arguments[i],i+=1),n[s]=l,G(l)?u=!0:o-=1,s+=1}return!u&&o<=0?t.apply(this,n):kr(Math.max(0,o),Wi(r,n,t))}}var ls=K(function(r,e){return r===1?re(e):kr(r,Wi(r,[],e))}),zi=ls;function wn(r){return function e(t,n,i){switch(arguments.length){case 0:return e;case 1:return G(t)?e:K(function(o,s){return r(t,o,s)});case 2:return G(t)&&G(n)?e:G(t)?K(function(o,s){return r(o,n,s)}):G(n)?K(function(o,s){return r(t,o,s)}):re(function(o){return r(t,n,o)});default:return G(t)&&G(n)&&G(i)?e:G(t)&&G(n)?K(function(o,s){return r(o,s,i)}):G(t)&&G(i)?K(function(o,s){return r(o,n,s)}):G(n)&&G(i)?K(function(o,s){return r(t,o,s)}):G(t)?re(function(o){return r(o,n,i)}):G(n)?re(function(o){return r(t,o,i)}):G(i)?re(function(o){return r(t,n,o)}):r(t,n,i)}}}var vn=Array.isArray||function(r){return r!=null&&r.length>=0&&Object.prototype.toString.call(r)==="[object Array]"};function hs(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function xn(r,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!vn(n)){for(var i=0;i<r.length;){if(typeof n[r[i]]=="function")return n[r[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(hs(n)){var o=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(n)}}return t.apply(this,arguments)}}function ps(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}}var sr={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function Ri(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function Ui(r,e,t){for(var n=0,i=t.length;n<i;){if(r(e,t[n]))return!0;n+=1}return!1}function ds(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function Ir(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function ms(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var hn=typeof Object.is=="function"?Object.is:ms,Fi=Object.prototype.toString,gs=function(){return Fi.call(arguments)==="[object Arguments]"?function(r){return Fi.call(r)==="[object Arguments]"}:function(r){return Ir("callee",r)}}(),ys=gs,ws=!{toString:null}.propertyIsEnumerable("toString"),ji=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Li=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),vs=function(r,e){for(var t=0;t<r.length;){if(r[t]===e)return!0;t+=1}return!1},xs=re(typeof Object.keys=="function"&&!Li?function(r){return Object(r)!==r?[]:Object.keys(r)}:function(r){if(Object(r)!==r)return[];var e,t,n=[],i=Li&&ys(r);for(e in r)Ir(e,r)&&(!i||e!=="length")&&(n[n.length]=e);if(ws)for(t=ji.length-1;t>=0;)e=ji[t],Ir(e,r)&&!vs(n,e)&&(n[n.length]=e),t-=1;return n}),jt=xs,_s=re(function(r){return r===null?"Null":r===void 0?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),Ni=_s;function Pi(r,e,t,n){var i=Ri(r),o=Ri(e);function s(u,l){return _n(u,l,t.slice(),n.slice())}return!Ui(function(u,l){return!Ui(s,l,u)},o,i)}function _n(r,e,t,n){if(hn(r,e))return!0;var i=Ni(r);if(i!==Ni(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(i){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&ds(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&hn(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!hn(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var o=t.length-1;o>=0;){if(t[o]===r)return n[o]===e;o-=1}switch(i){case"Map":return r.size!==e.size?!1:Pi(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size!==e.size?!1:Pi(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=jt(r);if(s.length!==jt(e).length)return!1;var u=t.concat([r]),l=n.concat([e]);for(o=s.length-1;o>=0;){var p=s[o];if(!(Ir(p,e)&&_n(e[p],r[p],u,l)))return!1;o-=1}return!0}var bs=K(function(r,e){return _n(r,e,[],[])}),Zi=bs;function Es(r,e,t){var n,i;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<r.length;){if(i=r[t],i===0&&1/i===n)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(i=r[t],typeof i=="number"&&i!==i)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(Zi(r[t],e))return t;t+=1}return-1}function Ss(r,e){return Es(e,r,0)>=0}function ar(r,e){for(var t=0,n=e.length,i=Array(n);t<n;)i[t]=r(e[t]),t+=1;return i}function pn(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var ir=function(r){return(r<10?"0":"")+r},As=typeof Date.prototype.toISOString=="function"?function(r){return r.toISOString()}:function(r){return r.getUTCFullYear()+"-"+ir(r.getUTCMonth()+1)+"-"+ir(r.getUTCDate())+"T"+ir(r.getUTCHours())+":"+ir(r.getUTCMinutes())+":"+ir(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},Ts=As;function Bs(r){return function(){return!r.apply(this,arguments)}}function qi(r,e,t){for(var n=0,i=t.length;n<i;)e=r(e,t[n]),n+=1;return e}function Is(r,e){for(var t=0,n=e.length,i=[];t<n;)r(e[t])&&(i[i.length]=e[t]),t+=1;return i}function Cs(r){return Object.prototype.toString.call(r)==="[object Object]"}var Os=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=sr.init,r.prototype["@@transducer/result"]=sr.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}();function ks(r){return function(e){return new Os(r,e)}}var Rs=K(xn(["fantasy-land/filter","filter"],ks,function(r,e){return Cs(e)?qi(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},jt(e)):Is(r,e)})),Us=Rs,Fs=K(function(r,e){return Us(Bs(r),e)}),js=Fs;function Vi(r,e){var t=function(o){var s=e.concat([r]);return Ss(o,s)?"<Circular>":Vi(o,s)},n=function(o,s){return ar(function(u){return pn(u)+": "+t(o[u])},s.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+ar(t,r).join(", ")+"))";case"[object Array]":return"["+ar(t,r).concat(n(r,js(function(o){return/^\d+$/.test(o)},jt(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):pn(Ts(r)))+")";case"[object Map]":return"new Map("+t(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+t(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":pn(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var i=r.toString();if(i!=="[object Object]")return i}return"{"+n(r,jt(r)).join(", ")+"}"}}var Ls=re(function(r){return Vi(r,[])}),Mi=Ls,Ns=K(function(r,e){if(r===e)return e;function t(u,l){if(u>l!=l>u)return l>u?l:u}var n=t(r,e);if(n!==void 0)return n;var i=t(typeof r,typeof e);if(i!==void 0)return i===typeof r?r:e;var o=Mi(r),s=t(o,Mi(e));return s!==void 0&&s===o?r:e}),Ps=Ns,Ms=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=sr.init,r.prototype["@@transducer/result"]=sr.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),Ds=function(r){return function(e){return new Ms(r,e)}},$s=Ds,Ws=K(xn(["fantasy-land/map","map"],$s,function(r,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return zi(e.length,function(){return r.call(this,e.apply(this,arguments))});case"[object Object]":return qi(function(t,n){return t[n]=r(e[n]),t},{},jt(e));default:return ar(r,e)}})),zs=Ws,Gi=Number.isInteger||function(r){return r<<0===r};function Yi(r){return Object.prototype.toString.call(r)==="[object String]"}var Zs=K(function(r,e){var t=r<0?e.length+r:r;return Yi(e)?e.charAt(t):e[t]}),Hi=Zs,qs=K(function(r,e){if(e!=null)return Gi(r)?Hi(r,e):e[r]}),Rr=qs,Vs=K(function(r,e){return zs(Rr(r),e)}),Gs=Vs,Ys=re(function(r){return vn(r)?!0:!r||typeof r!="object"||Yi(r)?!1:r.length===0?!0:r.length>0?r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1):!1}),Hs=Ys,Di=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Ks(r,e,t){return function(n,i,o){if(Hs(o))return r(n,i,o);if(o==null)return i;if(typeof o["fantasy-land/reduce"]=="function")return e(n,i,o,"fantasy-land/reduce");if(o[Di]!=null)return t(n,i,o[Di]());if(typeof o.next=="function")return t(n,i,o);if(typeof o.reduce=="function")return e(n,i,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function Xs(r,e,t){for(var n=0,i=t.length;n<i;){if(e=r["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}var Js=K(function(r,e){return kr(r.length,function(){return r.apply(e,arguments)})}),Qs=Js;function eu(r,e,t){for(var n=t.next();!n.done;){if(e=r["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function tu(r,e,t,n){return r["@@transducer/result"](t[n](Qs(r["@@transducer/step"],r),e))}var ru=Ks(Xs,tu,eu),nu=ru,iu=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function ou(r){return new iu(r)}var au=wn(function(r,e,t){return nu(typeof r=="function"?ou(r):r,e,t)}),Ki=au;function su(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function Xi(r,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return vn(n)||typeof n[r]!="function"?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var uu=wn(Xi("slice",function(r,e,t){return Array.prototype.slice.call(t,r,e)})),fu=uu,cu=re(Xi("tail",fu(1,1/0))),lu=cu;function Ji(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return kr(arguments[0].length,Ki(su,arguments[0],lu(arguments)))}var hu=K(function(r,e){return zi(Ki(Ps,0,Gs("length",e)),function(){var t=arguments,n=this;return r.apply(n,ar(function(i){return i.apply(n,t)},e))})}),pu=hu,du=K(function(r,e){return e==null||e!==e?r:e}),dn=du,mu=function(){function r(e,t){this.xf=t,this.f=e,this.found=!1}return r.prototype["@@transducer/init"]=sr.init,r.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},r.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=ps(this.xf["@@transducer/step"](e,t))),e},r}();function gu(r){return function(e){return new mu(r,e)}}var yu=K(xn(["find"],gu,function(r,e){for(var t=0,n=e.length;t<n;){if(r(e[t]))return e[t];t+=1}})),wu=yu,vu=re(function(r){return pu(function(){return Array.prototype.slice.call(arguments,0)},r)}),xu=vu,_u=K(function(r,e){return r.map(function(t){for(var n=e,i=0,o;i<t.length;){if(n==null)return;o=t[i],n=Gi(o)?Hi(o,n):n[o],i+=1}return n})}),bu=_u,Eu=K(function(r,e){return bu([r],e)[0]}),Qi=Eu,Su=wn(function(r,e,t){return Zi(r,Rr(e,t))}),Au=Su,Cr=class extends Error{},Tu=class extends Error{},Bu=class extends Error{},Iu="Url",Cu="Time-To-Live",Ou="Scheduler",mn=r=>Ji(dn([]),wu(Au(r,"name")),dn({}),Rr("value")),eo=r=>Ji(e=>{if(!e)throw new Bu(r);return e},Rr("tags"),dn([]));function to({fetch:r,GATEWAY_URL:e}){return async({query:t,variables:n})=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:n})}).then(i=>i.json())}function ku({fetch:r,GATEWAY_URL:e}){let t=to({fetch:r,GATEWAY_URL:e}),n=gn({fetch:r,GATEWAY_URL:e}),i=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async o=>t({query:i,variables:{transactionIds:[o]}}).then(Qi(["data","transactions","edges","0","node"])).then(eo(`Process ${o} was not found on gateway ${e}`)).then(mn(Ou)).then(s=>{if(!s)throw new Tu('No "Scheduler" tag found on process');return n(s)})}function gn({fetch:r,GATEWAY_URL:e}){let t=to({fetch:r,GATEWAY_URL:e}),n=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async i=>t({query:n,variables:{owner:i}}).then(Qi(["data","transactions","edges","0","node"])).then(eo(`Could not find 'Scheduler-Location' owner by wallet ${i}`)).then(xu([mn(Iu),mn(Cu)])).then(([o,s])=>{if(!o)throw new Cr('No "Url" tag found on Scheduler-Location');if(!s)throw new Cr('No "Time-To-Live" tag found on Scheduler-Location');return{url:o,ttl:s,owner:i}})}var Ft=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ro=new Set,yn=typeof process=="object"&&process?process:{},no=(r,e,t,n)=>{typeof yn.emitWarning=="function"?yn.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)},Or=globalThis.AbortController,$i=globalThis.AbortSignal;if(typeof Or>"u"){$i=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,n){this._onabort.push(n)}},Or=class{constructor(){e()}signal=new $i;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(let n of this.signal._onabort)n(t);this.signal.onabort?.(t)}}};let r=yn.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{r&&(r=!1,no("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Ru=r=>!ro.has(r),kh=Symbol("type"),Ge=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),io=r=>Ge(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Br:null:null,Br=class extends Array{constructor(r){super(r),this.fill(0)}},Uu=class or{heap;length;static#u=!1;static create(e){let t=io(e);if(!t)return[];or.#u=!0;let n=new or(e,t);return or.#u=!1,n}constructor(e,t){if(!or.#u)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Fu=class oo{#u;#l;#m;#g;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#n;#r;#e;#f;#h;#s;#o;#w;#a;#v;#x;#p;#_;#A;#c;static unsafeExposeInternals(e){return{starts:e.#x,ttls:e.#p,sizes:e.#v,keyMap:e.#n,keyList:e.#r,valList:e.#e,next:e.#f,prev:e.#h,get head(){return e.#s},get tail(){return e.#o},free:e.#w,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,n,i,o)=>e.#R(t,n,i,o),moveToTail:t=>e.#I(t),indexes:t=>e.#b(t),rindexes:t=>e.#E(t),isStale:t=>e.#d(t)}}get max(){return this.#u}get maxSize(){return this.#l}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#C}get dispose(){return this.#m}get disposeAfter(){return this.#g}constructor(e){let{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:u,allowStale:l,dispose:p,disposeAfter:m,noDisposeOnSet:g,noUpdateTTL:v,maxSize:S=0,maxEntrySize:T=0,sizeCalculation:E,fetchMethod:B,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:N,allowStaleOnFetchRejection:D,allowStaleOnFetchAbort:L,ignoreFetchAbort:Z}=e;if(t!==0&&!Ge(t))throw new TypeError("max option must be a nonnegative integer");let z=t?io(t):Array;if(!z)throw new Error("invalid max value: "+t);if(this.#u=t,this.#l=S,this.maxEntrySize=T||this.#l,this.sizeCalculation=E,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(B!==void 0&&typeof B!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=B,this.#A=!!B,this.#n=new Map,this.#r=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#f=new z(t),this.#h=new z(t),this.#s=0,this.#o=0,this.#w=Uu.create(t),this.#i=0,this.#y=0,typeof p=="function"&&(this.#m=p),typeof m=="function"?(this.#g=m,this.#a=[]):(this.#g=void 0,this.#a=void 0),this.#_=!!this.#m,this.#c=!!this.#g,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!v,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!D,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!Z,this.maxEntrySize!==0){if(this.#l!==0&&!Ge(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!Ge(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!N,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!u,this.ttlResolution=Ge(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Ge(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#U()}if(this.#u===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#l){let le="LRU_CACHE_UNBOUNDED";Ru(le)&&(ro.add(le),no("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",le,oo))}}getRemainingTTL(e){return this.#n.has(e)?1/0:0}#U(){let e=new Br(this.#u),t=new Br(this.#u);this.#p=e,this.#x=t,this.#F=(o,s,u=Ft.now())=>{if(t[o]=s!==0?u:0,e[o]=s,s!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#d(o)&&this.delete(this.#r[o])},s+1);l.unref&&l.unref()}},this.#T=o=>{t[o]=e[o]!==0?Ft.now():0},this.#S=(o,s)=>{if(e[s]){let u=e[s],l=t[s];if(!u||!l)return;o.ttl=u,o.start=l,o.now=n||i();let p=o.now-l;o.remainingTTL=u-p}};let n=0,i=()=>{let o=Ft.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#n.get(o);if(s===void 0)return 0;let u=e[s],l=t[s];if(!u||!l)return 1/0;let p=(n||i())-l;return u-p},this.#d=o=>{let s=t[o],u=e[o];return!!u&&!!s&&(n||i())-s>u}}#T=()=>{};#S=()=>{};#F=()=>{};#d=()=>!1;#P(){let e=new Br(this.#u);this.#y=0,this.#v=e,this.#B=t=>{this.#y-=e[t],e[t]=0},this.#j=(t,n,i,o)=>{if(this.#t(n))return 0;if(!Ge(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,t),!Ge(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#O=(t,n,i)=>{if(e[t]=n,this.#l){let o=this.#l-e[t];for(;this.#y>o;)this.#k(!0)}this.#y+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#y)}}#B=e=>{};#O=(e,t,n)=>{};#j=(e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#d(t))&&(yield t),t===this.#s));)t=this.#h[t]}*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#s;!(!this.#L(t)||((e||!this.#d(t))&&(yield t),t===this.#o));)t=this.#f[t]}#L(e){return e!==void 0&&this.#n.get(this.#r[e])===e}*entries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#b()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#E()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],t)}}forEach(e,t=this){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(t,o,this.#r[n],this)}}rforEach(e,t=this){for(let n of this.#E()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(t,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let t of this.#E({allowStale:!0}))this.#d(t)&&(this.delete(this.#r[t]),e=!0);return e}info(e){let t=this.#n.get(e);if(t===void 0)return;let n=this.#e[t],i=this.#t(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#p&&this.#x){let s=this.#p[t],u=this.#x[t];if(s&&u){let l=s-(Ft.now()-u);o.ttl=l,o.start=Date.now()}}return this.#v&&(o.size=this.#v[t]),o}dump(){let e=[];for(let t of this.#b({allowStale:!0})){let n=this.#r[t],i=this.#e[t],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#p&&this.#x){s.ttl=this.#p[t];let u=Ft.now()-this.#x[t];s.start=Math.floor(Date.now()-u)}this.#v&&(s.size=this.#v[t]),e.unshift([n,s])}return e}load(e){this.clear();for(let[t,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Ft.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:l}=n,{noUpdateTTL:p=this.noUpdateTTL}=n,m=this.#j(e,t,n.size||0,u);if(this.maxEntrySize&&m>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(e),this;let g=this.#i===0?void 0:this.#n.get(e);if(g===void 0)g=this.#i===0?this.#o:this.#w.length!==0?this.#w.pop():this.#i===this.#u?this.#k(!1):this.#i,this.#r[g]=e,this.#e[g]=t,this.#n.set(e,g),this.#f[this.#o]=g,this.#h[g]=this.#o,this.#o=g,this.#i++,this.#O(g,m,l),l&&(l.set="add"),p=!1;else{this.#I(g);let v=this.#e[g];if(t!==v){if(this.#A&&this.#t(v)){v.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:S}=v;S!==void 0&&!s&&(this.#_&&this.#m?.(S,e,"set"),this.#c&&this.#a?.push([S,e,"set"]))}else s||(this.#_&&this.#m?.(v,e,"set"),this.#c&&this.#a?.push([v,e,"set"]));if(this.#B(g),this.#O(g,m,l),this.#e[g]=t,l){l.set="replace";let S=v&&this.#t(v)?v.__staleWhileFetching:v;S!==void 0&&(l.oldValue=S)}}else l&&(l.set="update")}if(i!==0&&!this.#p&&this.#U(),this.#p&&(p||this.#F(g,i,o),l&&this.#S(l,g)),!s&&this.#c&&this.#a){let v=this.#a,S;for(;S=v?.shift();)this.#g?.(...S)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#s];if(this.#k(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#c&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#g?.(...t)}}}#k(e){let t=this.#s,n=this.#r[t],i=this.#e[t];return this.#A&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(i,n,"evict"),this.#c&&this.#a?.push([i,n,"evict"])),this.#B(t),e&&(this.#r[t]=void 0,this.#e[t]=void 0,this.#w.push(t)),this.#i===1?(this.#s=this.#o=0,this.#w.length=0):this.#s=this.#f[t],this.#n.delete(n),this.#i--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,o=this.#n.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#d(o))i&&(i.has="stale",this.#S(i,o));else return n&&this.#T(o),i&&(i.has="hit",this.#S(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#n.get(e);if(i===void 0||!n&&this.#d(i))return;let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}#R(e,t,n,i){let o=t===void 0?void 0:this.#e[t];if(this.#t(o))return o;let s=new Or,{signal:u}=n;u?.addEventListener("abort",()=>s.abort(u.reason),{signal:s.signal});let l={signal:s.signal,options:n,context:i},p=(E,B=!1)=>{let{aborted:C}=s.signal,N=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(C&&!B?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,N&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),C&&!N&&!B)return g(s.signal.reason);let D=S;return this.#e[t]===S&&(E===void 0?D.__staleWhileFetching?this.#e[t]=D.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,l.options))),E},m=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),g(E)),g=E=>{let{aborted:B}=s.signal,C=B&&n.allowStaleOnFetchAbort,N=C||n.allowStaleOnFetchRejection,D=N||n.noDeleteOnFetchRejection,L=S;if(this.#e[t]===S&&(!D||L.__staleWhileFetching===void 0?this.delete(e):C||(this.#e[t]=L.__staleWhileFetching)),N)return n.status&&L.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),L.__staleWhileFetching;if(L.__returned===L)throw E},v=(E,B)=>{let C=this.#C?.(e,o,l);C&&C instanceof Promise&&C.then(N=>E(N===void 0?void 0:N),B),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=N=>p(N,!0)))})};n.status&&(n.status.fetchDispatched=!0);let S=new Promise(v).then(p,m),T=Object.assign(S,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,T,{...l.options,status:void 0}),t=this.#n.get(e)):this.#e[t]=T,T}#t(e){if(!this.#A)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Or}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:l=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:v=this.allowStaleOnFetchRejection,ignoreFetchAbort:S=this.ignoreFetchAbort,allowStaleOnFetchAbort:T=this.allowStaleOnFetchAbort,context:E,forceRefresh:B=!1,status:C,signal:N}=t;if(!this.#A)return C&&(C.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:C});let D={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:u,size:l,sizeCalculation:p,noUpdateTTL:m,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:T,ignoreFetchAbort:S,status:C,signal:N},L=this.#n.get(e);if(L===void 0){C&&(C.fetch="miss");let Z=this.#R(e,L,D,E);return Z.__returned=Z}else{let Z=this.#e[L];if(this.#t(Z)){let Ot=n&&Z.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",Ot&&(C.returnedStale=!0)),Ot?Z.__staleWhileFetching:Z.__returned=Z}let z=this.#d(L);if(!B&&!z)return C&&(C.fetch="hit"),this.#I(L),i&&this.#T(L),C&&this.#S(C,L),Z;let le=this.#R(e,L,D,E),rt=le.__staleWhileFetching!==void 0&&n;return C&&(C.fetch=z?"stale":"refresh",rt&&z&&(C.returnedStale=!0)),rt?le.__staleWhileFetching:le.__returned=le}}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=t,u=this.#n.get(e);if(u!==void 0){let l=this.#e[u],p=this.#t(l);return s&&this.#S(s,u),this.#d(u)?(s&&(s.get="stale"),p?(s&&n&&l.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?l.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?l:void 0)):(s&&(s.get="hit"),p?l.__staleWhileFetching:(this.#I(u),i&&this.#T(u),l))}else s&&(s.get="miss")}#N(e,t){this.#h[t]=e,this.#f[e]=t}#I(e){e!==this.#o&&(e===this.#s?this.#s=this.#f[e]:this.#N(this.#h[e],this.#f[e]),this.#N(this.#o,e),this.#o=e)}delete(e){let t=!1;if(this.#i!==0){let n=this.#n.get(e);if(n!==void 0)if(t=!0,this.#i===1)this.clear();else{this.#B(n);let i=this.#e[n];if(this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(i,e,"delete"),this.#c&&this.#a?.push([i,e,"delete"])),this.#n.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o)this.#o=this.#h[n];else if(n===this.#s)this.#s=this.#f[n];else{let o=this.#h[n];this.#f[o]=this.#f[n];let s=this.#f[n];this.#h[s]=this.#h[n]}this.#i--,this.#w.push(n)}}if(this.#c&&this.#a?.length){let n=this.#a,i;for(;i=n?.shift();)this.#g?.(...i)}return t}clear(){for(let e of this.#E({allowStale:!0})){let t=this.#e[e];if(this.#t(t))t.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#_&&this.#m?.(t,n,"delete"),this.#c&&this.#a?.push([t,n,"delete"])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#x&&(this.#p.fill(0),this.#x.fill(0)),this.#v&&this.#v.fill(0),this.#s=0,this.#o=0,this.#w.length=0,this.#y=0,this.#i=0,this.#c&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#g?.(...t)}}},nt,ur;function ju({size:r}){return nt||(ur=r,nt=new Fu({max:r,maxSize:1e6*5,sizeCalculation:e=>JSON.stringify(e).length,allowStale:!0}),nt)}function Lu({cache:r=nt}){return async e=>{if(ur)return r.get(e)}}function Nu({cache:r=nt}){return async(e,{url:t,address:n},i)=>{if(ur)return r.set(e,{url:t,address:n},{ttl:i})}}function Pu({cache:r=nt}){return async e=>{if(ur)return r.get(e)}}function Mu({cache:r=nt}){return async(e,t,n)=>{if(ur)return r.set(e,{url:t,address:e},{ttl:n})}}function Du({loadProcessScheduler:r,cache:e}){return t=>e.getByProcess(t).then(n=>n||r(t).then(i=>{let o={url:i.url,address:i.owner};return Promise.all([e.setByProcess(t,o,i.ttl),e.setByOwner(i.owner,i.url,i.ttl)]).then(()=>o)}))}function $u({loadScheduler:r,cache:e}){return t=>e.getByOwner(t).then(n=>n?{url:n.url}:r(t).then(i=>e.setByOwner(t,i.url,i.ttl).then(()=>({url:i.url}))).catch(i=>{if(!(i instanceof Cr))throw i}))}function Wu({loadScheduler:r,cache:e}){return t=>e.getByOwner(t).then(n=>n?!0:r(t).then(i=>e.setByOwner(t,i.url,i.ttl)).then(()=>!0).catch(i=>{if(i instanceof Cr)return!1;throw i}))}var zu=globalThis.GATEWAY_URL||"https://arweave.net";function bn({cacheSize:r=100,GATEWAY_URL:e=zu}={}){let t=ju({size:r}),n=Pu({cache:t}),i=Lu({cache:t}),o=Mu({cache:t}),s=Nu({cache:t}),u=Du({loadProcessScheduler:ku({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}}),l=Wu({loadScheduler:gn({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}}),p=$u({loadScheduler:gn({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}});return{locate:u,validate:l,raw:p}}var{locate:Rh,validate:Uh,raw:Fh}=bn();var Fe=r=>({fork:r,toPromise:()=>new Promise((e,t)=>r(t,e)),map:e=>Fe((t,n)=>r(t,i=>n(e(i)))),bimap:(e,t)=>Fe((n,i)=>r(o=>n(e(o)),o=>i(t(o)))),chain:e=>Fe((t,n)=>r(t,i=>e(i).fork(t,n))),bichain:(e,t)=>Fe((n,i)=>r(o=>e(o).fork(n,i),o=>t(o).fork(n,i))),fold:(e,t)=>Fe((n,i)=>r(o=>e(o).fork(n,i),o=>t(o).fork(n,i)))}),P=r=>Fe((e,t)=>t(r)),ge=r=>Fe((e,t)=>t(r)),je=r=>Fe((e,t)=>e(r)),H=r=>(...e)=>Fe((t,n)=>r(...e).then(n).catch(t));function ao({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployMessage");return i=>P(i).chain(H(({processId:o,data:s,tags:u,anchor:l,signer:p})=>p({data:s,tags:u,target:o,anchor:l}))).chain(o=>P(o).chain(H(async s=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>je(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),H(async s=>{if(s.ok)return s.json();throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when writing message via MU"),n.tap("Successfully wrote message via MU")).map(s=>({res:s,messageId:o.id}))).toPromise()}function so({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployProcess");return i=>P(i).chain(H(({data:o,tags:s,signer:u})=>u({data:o,tags:s}))).chain(o=>P(o).chain(H(async s=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>je(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),H(async s=>{if(s.ok)return s.json();throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when deploying process via MU"),n.tap("Successfully deployed process via MU")).map(s=>({res:s,processId:o.id}))).toPromise()}function uo({fetch:r,CU_URL:e,logger:t}){return({id:n,processId:i})=>P(`${e}/result/${n}?process-id=${i}`).map(t.tap("fetching message result from CU")).chain(H(async o=>r(o,{method:"GET",headers:{Accept:"application/json"}}).then(s=>s.json()))).toPromise()}var fo=({fetch:r})=>async({suUrl:e,processId:t})=>r(`${e}/processes/${t}`,{method:"GET"}).then(n=>n.json());var Gu=function(){return!1},En=Gu;var Yu=function(){return!0},Ur=Yu;var he={"@@functional/placeholder":!0};function W(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function M(r){return function e(t){return arguments.length===0||W(t)?e:r.apply(this,arguments)}}function k(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return W(t)?e:M(function(i){return r(t,i)});default:return W(t)&&W(n)?e:W(t)?M(function(i){return r(i,n)}):W(n)?M(function(i){return r(t,i)}):r(t,n)}}}function Sn(r,e){r=r||[],e=e||[];var t,n=r.length,i=e.length,o=[];for(t=0;t<n;)o[o.length]=r[t],t+=1;for(t=0;t<i;)o[o.length]=e[t],t+=1;return o}function xe(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,o){return e.apply(this,arguments)};case 5:return function(t,n,i,o,s){return e.apply(this,arguments)};case 6:return function(t,n,i,o,s,u){return e.apply(this,arguments)};case 7:return function(t,n,i,o,s,u,l){return e.apply(this,arguments)};case 8:return function(t,n,i,o,s,u,l,p){return e.apply(this,arguments)};case 9:return function(t,n,i,o,s,u,l,p,m){return e.apply(this,arguments)};case 10:return function(t,n,i,o,s,u,l,p,m,g){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Fr(r,e,t){return function(){for(var n=[],i=0,o=r,s=0,u=!1;s<e.length||i<arguments.length;){var l;s<e.length&&(!W(e[s])||i>=arguments.length)?l=e[s]:(l=arguments[i],i+=1),n[s]=l,W(l)?u=!0:o-=1,s+=1}return!u&&o<=0?t.apply(this,n):xe(Math.max(0,o),Fr(r,n,t))}}var Hu=k(function(e,t){return e===1?M(t):xe(e,Fr(e,[],t))}),Lt=Hu;function ne(r){return function e(t,n,i){switch(arguments.length){case 0:return e;case 1:return W(t)?e:k(function(o,s){return r(t,o,s)});case 2:return W(t)&&W(n)?e:W(t)?k(function(o,s){return r(o,n,s)}):W(n)?k(function(o,s){return r(t,o,s)}):M(function(o){return r(t,n,o)});default:return W(t)&&W(n)&&W(i)?e:W(t)&&W(n)?k(function(o,s){return r(o,s,i)}):W(t)&&W(i)?k(function(o,s){return r(o,n,s)}):W(n)&&W(i)?k(function(o,s){return r(t,o,s)}):W(t)?M(function(o){return r(o,n,i)}):W(n)?M(function(o){return r(t,o,i)}):W(i)?M(function(o){return r(t,n,o)}):r(t,n,i)}}}var _e=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function An(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function Le(r,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!_e(n)){for(var i=0;i<r.length;){if(typeof n[r[i]]=="function")return n[r[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(An(n)){var o=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(n)}}return t.apply(this,arguments)}}var se={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function jr(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function Lr(r,e,t){for(var n=0,i=t.length;n<i;){if(r(e,t[n]))return!0;n+=1}return!1}function Tn(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function ye(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function Ku(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Nr=typeof Object.is=="function"?Object.is:Ku;var co=Object.prototype.toString,Xu=function(){return co.call(arguments)==="[object Arguments]"?function(e){return co.call(e)==="[object Arguments]"}:function(e){return ye("callee",e)}}(),lo=Xu;var Ju=!{toString:null}.propertyIsEnumerable("toString"),ho=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],po=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),Qu=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},ef=typeof Object.keys=="function"&&!po?M(function(e){return Object(e)!==e?[]:Object.keys(e)}):M(function(e){if(Object(e)!==e)return[];var t,n,i=[],o=po&&lo(e);for(t in e)ye(t,e)&&(!o||t!=="length")&&(i[i.length]=t);if(Ju)for(n=ho.length-1;n>=0;)t=ho[n],ye(t,e)&&!Qu(i,t)&&(i[i.length]=t),n-=1;return i}),Ie=ef;var tf=M(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),Bn=tf;function mo(r,e,t,n){var i=jr(r),o=jr(e);function s(u,l){return fr(u,l,t.slice(),n.slice())}return!Lr(function(u,l){return!Lr(s,l,u)},o,i)}function fr(r,e,t,n){if(Nr(r,e))return!0;var i=Bn(r);if(i!==Bn(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(i){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&Tn(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&Nr(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Nr(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var o=t.length-1;o>=0;){if(t[o]===r)return n[o]===e;o-=1}switch(i){case"Map":return r.size!==e.size?!1:mo(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size!==e.size?!1:mo(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=Ie(r);if(s.length!==Ie(e).length)return!1;var u=t.concat([r]),l=n.concat([e]);for(o=s.length-1;o>=0;){var p=s[o];if(!(ye(p,e)&&fr(e[p],r[p],u,l)))return!1;o-=1}return!0}var rf=k(function(e,t){return fr(e,t,[],[])}),Ce=rf;function In(r,e,t){var n,i;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<r.length;){if(i=r[t],i===0&&1/i===n)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(i=r[t],typeof i=="number"&&i!==i)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(Ce(r[t],e))return t;t+=1}return-1}function cr(r,e){return In(e,r,0)>=0}function it(r,e){for(var t=0,n=e.length,i=Array(n);t<n;)i[t]=r(e[t]),t+=1;return i}function lr(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var hr=function(e){return(e<10?"0":"")+e},nf=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+hr(e.getUTCMonth()+1)+"-"+hr(e.getUTCDate())+"T"+hr(e.getUTCHours())+":"+hr(e.getUTCMinutes())+":"+hr(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},go=nf;function Cn(r){return function(){return!r.apply(this,arguments)}}function pr(r,e,t){for(var n=0,i=t.length;n<i;)e=r(e,t[n]),n+=1;return e}function On(r,e){for(var t=0,n=e.length,i=[];t<n;)r(e[t])&&(i[i.length]=e[t]),t+=1;return i}function kn(r){return Object.prototype.toString.call(r)==="[object Object]"}var of=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=se.init,r.prototype["@@transducer/result"]=se.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}();function Rn(r){return function(e){return new of(r,e)}}var af=k(Le(["fantasy-land/filter","filter"],Rn,function(r,e){return kn(e)?pr(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},Ie(e)):On(r,e)})),yo=af;var sf=k(function(e,t){return yo(Cn(e),t)}),ot=sf;function Pr(r,e){var t=function(s){var u=e.concat([r]);return cr(s,u)?"<Circular>":Pr(s,u)},n=function(o,s){return it(function(u){return lr(u)+": "+t(o[u])},s.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+it(t,r).join(", ")+"))";case"[object Array]":return"["+it(t,r).concat(n(r,ot(function(o){return/^\d+$/.test(o)},Ie(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):lr(go(r)))+")";case"[object Map]":return"new Map("+t(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+t(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":lr(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var i=r.toString();if(i!=="[object Object]")return i}return"{"+n(r,Ie(r)).join(", ")+"}"}}var uf=M(function(e){return Pr(e,[])}),Ne=uf;var ff=k(function(e,t){if(e===t)return t;function n(l,p){if(l>p!=p>l)return p>l?p:l}var i=n(e,t);if(i!==void 0)return i;var o=n(typeof e,typeof t);if(o!==void 0)return o===typeof e?e:t;var s=Ne(e),u=n(s,Ne(t));return u!==void 0&&u===s?e:t}),wo=ff;var cf=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=se.init,r.prototype["@@transducer/result"]=se.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),lf=function(e){return function(t){return new cf(e,t)}},Mr=lf;var hf=k(Le(["fantasy-land/map","map"],Mr,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Lt(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return pr(function(n,i){return n[i]=e(t[i]),n},{},Ie(t));default:return it(e,t)}})),at=hf;var Ye=Number.isInteger||function(e){return e<<0===e};function He(r){return Object.prototype.toString.call(r)==="[object String]"}var pf=k(function(e,t){var n=e<0?t.length+e:e;return He(t)?t.charAt(n):t[n]}),Dr=pf;var df=k(function(e,t){if(t!=null)return Ye(e)?Dr(e,t):t[e]}),ue=df;var mf=M(function(e){return _e(e)?!0:!e||typeof e!="object"||He(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Nt=mf;var vo=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Un(r,e,t){return function(i,o,s){if(Nt(s))return r(i,o,s);if(s==null)return o;if(typeof s["fantasy-land/reduce"]=="function")return e(i,o,s,"fantasy-land/reduce");if(s[vo]!=null)return t(i,o,s[vo]());if(typeof s.next=="function")return t(i,o,s);if(typeof s.reduce=="function")return e(i,o,s,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function dr(r,e,t){for(var n=0,i=t.length;n<i;){if(e=r["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}var gf=k(function(e,t){return xe(e.length,function(){return e.apply(t,arguments)})}),xo=gf;function yf(r,e,t){for(var n=t.next();!n.done;){if(e=r["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function wf(r,e,t,n){return r["@@transducer/result"](t[n](xo(r["@@transducer/step"],r),e))}var vf=Un(dr,wf,yf),$r=vf;var xf=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function Fn(r){return new xf(r)}var _f=ne(function(r,e,t){return $r(typeof r=="function"?Fn(r):r,e,t)}),Pe=_f;var bf=M(function(e){return function(){return e}}),mr=bf;var Ef=k(function(e,t){return Sn(t,[e])}),st=Ef;function jn(r,e,t){if(Ye(r)&&_e(t)){var n=[].concat(t);return n[r]=e,n}var i={};for(var o in t)i[o]=t[o];return i[r]=e,i}var Sf=M(function(e){return e==null}),ut=Sf;var Af=ne(function r(e,t,n){if(e.length===0)return t;var i=e[0];if(e.length>1){var o=!ut(n)&&ye(i,n)&&typeof n[i]=="object"?n[i]:Ye(e[1])?[]:{};t=r(Array.prototype.slice.call(e,1),t,o)}return jn(i,t,n)}),_o=Af;var Tf=ne(function(e,t,n){return _o([e],t,n)}),pe=Tf;function Pt(r){var e=Object.prototype.toString.call(r);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}function Ln(r){return function e(t){for(var n,i,o,s=[],u=0,l=t.length;u<l;){if(Nt(t[u]))for(n=r?e(t[u]):t[u],o=0,i=n.length;o<i;)s[s.length]=n[o],o+=1;else s[s.length]=t[u];u+=1}return s}}function Nn(r){return{"@@transducer/value":r,"@@transducer/reduced":!0}}var bo="@@transducer/init",Pn="@@transducer/step",Eo="@@transducer/result",Bf=function(){function r(e){this.xf=e}return r.prototype[bo]=se.init,r.prototype[Eo]=se.result,r.prototype[Pn]=function(e,t){var n=this.xf[Pn](e,t);return n["@@transducer/reduced"]?Nn(n):n},r}(),If=function(){function r(e){this.xf=new Bf(e)}return r.prototype[bo]=se.init,r.prototype[Eo]=se.result,r.prototype[Pn]=function(e,t){return Nt(t)?$r(this.xf,e,t):dr(this.xf,e,[t])},r}(),Cf=function(e){return new If(e)},So=Cf;function Mn(r){return function(e){return Mr(r)(So(e))}}var Of=k(Le(["fantasy-land/chain","chain"],Mn,function(e,t){return typeof t=="function"?function(n){return e(t(n))(n)}:Ln(!1)(at(e,t))})),Dn=Of;function $n(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function gr(r,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return _e(n)||typeof n[r]!="function"?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var kf=ne(gr("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),Ao=kf;var Rf=M(gr("tail",Ao(1,1/0))),To=Rf;function be(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return xe(arguments[0].length,Pe($n,arguments[0],To(arguments)))}function Wn(r){return r}var Uf=M(Wn),ft=Uf;var Ff=k(function(e,t){if(_e(e)){if(_e(t))return e.concat(t);throw new TypeError(Ne(t)+" is not an array")}if(He(e)){if(He(t))return e+t;throw new TypeError(Ne(t)+" is not a string")}if(e!=null&&Pt(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(e!=null&&Pt(e.concat))return e.concat(t);throw new TypeError(Ne(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),ct=Ff;var jf=M(function(e){var t=Pe(wo,0,at(function(n){return n[0].length},e));return xe(t,function(){for(var n=0;n<e.length;){if(e[n][0].apply(this,arguments))return e[n][1].apply(this,arguments);n+=1}})}),Wr=jf;var Lf=k(function(e,t){return t==null||t!==t?e:t}),Me=Lf;var Nf=k(function(e,t){if(e.length===0||ut(t))return!1;for(var n=t,i=0;i<e.length;)if(!ut(n)&&ye(e[i],n))n=n[e[i]],i+=1;else return!1;return!0}),Bo=Nf;var Pf=k(function(e,t){return Bo([e],t)}),zn=Pf;var Mf=ne(function(e,t,n){return Lt(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})}),yr=Mf;var Df=k(cr),Zn=Df;var $f=k(function(e,t){return Lt(e+1,function(){var n=arguments[e];if(n!=null&&Pt(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(Ne(n)+' does not have a method named "'+t+'"')})}),Io=$f;var Wf=k(function(e,t){return t instanceof e||t!=null&&(t.constructor===e||e.name==="Object"&&typeof t=="object")}),lt=Wf;var zf=M(function(e){return!ut(e)}),ht=zf;var Zf=Io(1,"join"),qn=Zf;var qf=k(function(e,t){return e.map(function(n){for(var i=t,o=0,s;o<n.length;){if(i==null)return;s=n[o],i=Ye(s)?Dr(s,i):i[s],o+=1}return i})}),Co=qf;var Vf=k(function(e,t){return Co([e],t)[0]}),Vn=Vf;var Gf=ne(function(e,t,n){return Ce(e,ue(t,n))}),wr=Gf;var Yf=ne(function(e,t,n){return Me(e,ue(t,n))}),Gn=Yf;var Hf=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=se.init,r.prototype["@@transducer/result"]=se.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},r}();function Yn(r){return function(e){return new Hf(r,e)}}var Kf=k(Le([],Yn,function(e,t){return e(t),t})),Hn=Kf;var $;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},r.getValidEnumValues=i=>{let o=r.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),s={};for(let u of o)s[u]=i[u];return r.objectValues(s)},r.objectValues=i=>r.objectKeys(i).map(function(o){return i[o]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},r.find=(i,o)=>{for(let s of i)if(o(s))return s},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}r.joinValues=n,r.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})($||($={}));var Xn;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Xn||(Xn={}));var A=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ke=r=>{switch(typeof r){case"undefined":return A.undefined;case"string":return A.string;case"number":return isNaN(r)?A.nan:A.number;case"boolean":return A.boolean;case"function":return A.function;case"bigint":return A.bigint;case"symbol":return A.symbol;case"object":return Array.isArray(r)?A.array:r===null?A.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?A.promise:typeof Map<"u"&&r instanceof Map?A.map:typeof Set<"u"&&r instanceof Set?A.set:typeof Date<"u"&&r instanceof Date?A.date:A.object;default:return A.unknown}},x=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xf=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),ie=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(t(s));else{let u=n,l=0;for(;l<s.path.length;){let p=s.path[l];l===s.path.length-1?(u[p]=u[p]||{_errors:[]},u[p]._errors.push(t(s))):u[p]=u[p]||{_errors:[]},u=u[p],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};ie.create=r=>new ie(r);var vr=(r,e)=>{let t;switch(r.code){case x.invalid_type:r.received===A.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case x.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,$.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(r.keys,", ")}`;break;case x.invalid_union:t="Invalid input";break;case x.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(r.options)}`;break;case x.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(r.options)}, received '${r.received}'`;break;case x.invalid_arguments:t="Invalid function arguments";break;case x.invalid_return_type:t="Invalid function return type";break;case x.invalid_date:t="Invalid date";break;case x.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:$.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case x.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case x.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case x.custom:t="Invalid input";break;case x.invalid_intersection_types:t="Intersection results could not be merged";break;case x.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case x.not_finite:t="Number must be finite";break;default:t=e.defaultError,$.assertNever(r)}return{message:t}},Ro=vr;function Jf(r){Ro=r}function Zr(){return Ro}var qr=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,o=[...t,...i.path||[]],s={...i,path:o},u="",l=n.filter(p=>!!p).slice().reverse();for(let p of l)u=p(s,{data:e,defaultError:u}).message;return{...i,path:o,message:i.message||u}},Qf=[];function I(r,e){let t=qr({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zr(),vr].filter(n=>!!n)});r.common.issues.push(t)}var te=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return U;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t)n.push({key:await i.key,value:await i.value});return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return U;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},U=Object.freeze({status:"aborted"}),Uo=r=>({status:"dirty",value:r}),oe=r=>({status:"valid",value:r}),Jn=r=>r.status==="aborted",Qn=r=>r.status==="dirty",xr=r=>r.status==="valid",Vr=r=>typeof Promise<"u"&&r instanceof Promise,O;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(O||(O={}));var we=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Oo=(r,e)=>{if(xr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ie(r.common.issues);return this._error=t,this._error}}};function F(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,u)=>s.code!=="invalid_type"?{message:u.defaultError}:typeof u.data>"u"?{message:n??u.defaultError}:{message:t??u.defaultError},description:i}}var j=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ke(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ke(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:Ke(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Vr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let i={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ke(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Oo(i,o)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ke(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Vr(i)?i:Promise.resolve(i));return Oo(n,o)}refine(e,t){let n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{let s=e(i),u=()=>o.addIssue({code:x.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(u(),!1)):s?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new de({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ee.create(this,this._def)}nullable(){return We.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $e.create(this,this._def)}promise(){return Qe.create(this,this._def)}or(e){return vt.create([this,e],this._def)}and(e){return xt.create(this,e,this._def)}transform(e){return new de({...F(this._def),schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new At({...F(this._def),innerType:this,defaultValue:t,typeName:R.ZodDefault})}brand(){return new Kr({typeName:R.ZodBranded,type:this,...F(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Zt({...F(this._def),innerType:this,catchValue:t,typeName:R.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return _r.create(this,e)}readonly(){return Vt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ec=/^c[^\s-]{8,}$/i,tc=/^[a-z][a-z0-9]*$/,rc=/^[0-9A-HJKMNP-TV-Z]{26}$/,nc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ic=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Kn,ac=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,sc=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,uc=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function fc(r,e){return!!((e==="v4"||!e)&&ac.test(r)||(e==="v6"||!e)&&sc.test(r))}var Xe=class r extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==A.string){let o=this._getOrReturnCtx(e);return I(o,{code:x.invalid_type,expected:A.string,received:o.parsedType}),U}let n=new te,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:x.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:x.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,u=e.data.length<o.value;(s||u)&&(i=this._getOrReturnCtx(e,i),s?I(i,{code:x.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&I(i,{code:x.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")ic.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"email",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Kn||(Kn=new RegExp(oc,"u")),Kn.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"emoji",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")nc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"uuid",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")ec.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")tc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid2",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")rc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ulid",code:x.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),I(i,{validation:"url",code:x.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"regex",code:x.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),I(i,{code:x.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:x.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:x.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?uc(o).test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:x.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?fc(e.data,o.version)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ip",code:x.invalid_string,message:o.message}),n.dirty()):$.assertNever(o);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:x.invalid_string,...O.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...O.errToObj(e)})}url(e){return this._addCheck({kind:"url",...O.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...O.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...O.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...O.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...O.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...O.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...O.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...O.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...O.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...O.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...O.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...O.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...O.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...O.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...O.errToObj(t)})}nonempty(e){return this.min(1,O.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Xe.create=r=>{var e;return new Xe({checks:[],typeName:R.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...F(r)})};function cc(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,o=parseInt(r.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var pt=class r extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==A.number){let o=this._getOrReturnCtx(e);return I(o,{code:x.invalid_type,expected:A.number,received:o.parsedType}),U}let n,i=new te;for(let o of this._def.checks)o.kind==="int"?$.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:x.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?cc(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:x.not_finite,message:o.message}),i.dirty()):$.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:O.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:O.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:O.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:O.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:O.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};pt.create=r=>new pt({checks:[],typeName:R.ZodNumber,coerce:r?.coerce||!1,...F(r)});var dt=class r extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==A.bigint){let o=this._getOrReturnCtx(e);return I(o,{code:x.invalid_type,expected:A.bigint,received:o.parsedType}),U}let n,i=new te;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),I(n,{code:x.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):$.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:O.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};dt.create=r=>{var e;return new dt({checks:[],typeName:R.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...F(r)})};var mt=class extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==A.boolean){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.boolean,received:n.parsedType}),U}return oe(e.data)}};mt.create=r=>new mt({typeName:R.ZodBoolean,coerce:r?.coerce||!1,...F(r)});var gt=class r extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==A.date){let o=this._getOrReturnCtx(e);return I(o,{code:x.invalid_type,expected:A.date,received:o.parsedType}),U}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return I(o,{code:x.invalid_date}),U}let n=new te,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:x.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:x.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):$.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:O.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:O.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};gt.create=r=>new gt({checks:[],coerce:r?.coerce||!1,typeName:R.ZodDate,...F(r)});var Dt=class extends j{_parse(e){if(this._getType(e)!==A.symbol){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.symbol,received:n.parsedType}),U}return oe(e.data)}};Dt.create=r=>new Dt({typeName:R.ZodSymbol,...F(r)});var yt=class extends j{_parse(e){if(this._getType(e)!==A.undefined){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.undefined,received:n.parsedType}),U}return oe(e.data)}};yt.create=r=>new yt({typeName:R.ZodUndefined,...F(r)});var wt=class extends j{_parse(e){if(this._getType(e)!==A.null){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.null,received:n.parsedType}),U}return oe(e.data)}};wt.create=r=>new wt({typeName:R.ZodNull,...F(r)});var Je=class extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return oe(e.data)}};Je.create=r=>new Je({typeName:R.ZodAny,...F(r)});var De=class extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oe(e.data)}};De.create=r=>new De({typeName:R.ZodUnknown,...F(r)});var Se=class extends j{_parse(e){let t=this._getOrReturnCtx(e);return I(t,{code:x.invalid_type,expected:A.never,received:t.parsedType}),U}};Se.create=r=>new Se({typeName:R.ZodNever,...F(r)});var $t=class extends j{_parse(e){if(this._getType(e)!==A.undefined){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.void,received:n.parsedType}),U}return oe(e.data)}};$t.create=r=>new $t({typeName:R.ZodVoid,...F(r)});var $e=class r extends j{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==A.array)return I(t,{code:x.invalid_type,expected:A.array,received:t.parsedType}),U;if(i.exactLength!==null){let s=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(s||u)&&(I(t,{code:s?x.too_big:x.too_small,minimum:u?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(I(t,{code:x.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(I(t,{code:x.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((s,u)=>i.type._parseAsync(new we(t,s,t.path,u)))).then(s=>te.mergeArray(n,s));let o=[...t.data].map((s,u)=>i.type._parseSync(new we(t,s,t.path,u)));return te.mergeArray(n,o)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:O.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:O.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:O.toString(t)}})}nonempty(e){return this.min(1,e)}};$e.create=(r,e)=>new $e({type:r,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray,...F(e)});function Mt(r){if(r instanceof fe){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=Ee.create(Mt(n))}return new fe({...r._def,shape:()=>e})}else return r instanceof $e?new $e({...r._def,type:Mt(r.element)}):r instanceof Ee?Ee.create(Mt(r.unwrap())):r instanceof We?We.create(Mt(r.unwrap())):r instanceof Oe?Oe.create(r.items.map(e=>Mt(e))):r}var fe=class r extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=$.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==A.object){let p=this._getOrReturnCtx(e);return I(p,{code:x.invalid_type,expected:A.object,received:p.parsedType}),U}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),u=[];if(!(this._def.catchall instanceof Se&&this._def.unknownKeys==="strip"))for(let p in i.data)s.includes(p)||u.push(p);let l=[];for(let p of s){let m=o[p],g=i.data[p];l.push({key:{status:"valid",value:p},value:m._parse(new we(i,g,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Se){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of u)l.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(p==="strict")u.length>0&&(I(i,{code:x.unrecognized_keys,keys:u}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of u){let g=i.data[m];l.push({key:{status:"valid",value:m},value:p._parse(new we(i,g,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let p=[];for(let m of l){let g=await m.key;p.push({key:g,value:await m.value,alwaysSet:m.alwaysSet})}return p}).then(p=>te.mergeObjectSync(n,p)):te.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return O.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,o,s,u;let l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,t,n).message)!==null&&s!==void 0?s:n.defaultError;return t.code==="unrecognized_keys"?{message:(u=O.errToObj(e).message)!==null&&u!==void 0?u:l}:{message:l}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:R.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return $.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return $.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}deepPartial(){return Mt(this)}partial(e){let t={};return $.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return $.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Ee;)o=o._def.innerType;t[n]=o}}),new r({...this._def,shape:()=>t})}keyof(){return Fo($.objectKeys(this.shape))}};fe.create=(r,e)=>new fe({shape:()=>r,unknownKeys:"strip",catchall:Se.create(),typeName:R.ZodObject,...F(e)});fe.strictCreate=(r,e)=>new fe({shape:()=>r,unknownKeys:"strict",catchall:Se.create(),typeName:R.ZodObject,...F(e)});fe.lazycreate=(r,e)=>new fe({shape:r,unknownKeys:"strip",catchall:Se.create(),typeName:R.ZodObject,...F(e)});var vt=class extends j{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(o){for(let u of o)if(u.result.status==="valid")return u.result;for(let u of o)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;let s=o.map(u=>new ie(u.ctx.common.issues));return I(t,{code:x.invalid_union,unionErrors:s}),U}if(t.common.async)return Promise.all(n.map(async o=>{let s={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let l of n){let p={...t,common:{...t.common,issues:[]},parent:null},m=l._parseSync({data:t.data,path:t.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&s.push(p.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;let u=s.map(l=>new ie(l));return I(t,{code:x.invalid_union,unionErrors:u}),U}}get options(){return this._def.options}};vt.create=(r,e)=>new vt({options:r,typeName:R.ZodUnion,...F(e)});var zr=r=>r instanceof _t?zr(r.schema):r instanceof de?zr(r.innerType()):r instanceof bt?[r.value]:r instanceof Et?r.options:r instanceof St?Object.keys(r.enum):r instanceof At?zr(r._def.innerType):r instanceof yt?[void 0]:r instanceof wt?[null]:null,Gr=class r extends j{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==A.object)return I(t,{code:x.invalid_type,expected:A.object,received:t.parsedType}),U;let n=this.discriminator,i=t.data[n],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(I(t,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),U)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let o of t){let s=zr(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of s){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,o)}}return new r({typeName:R.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...F(n)})}};function ei(r,e){let t=Ke(r),n=Ke(e);if(r===e)return{valid:!0,data:r};if(t===A.object&&n===A.object){let i=$.objectKeys(e),o=$.objectKeys(r).filter(u=>i.indexOf(u)!==-1),s={...r,...e};for(let u of o){let l=ei(r[u],e[u]);if(!l.valid)return{valid:!1};s[u]=l.data}return{valid:!0,data:s}}else if(t===A.array&&n===A.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<r.length;o++){let s=r[o],u=e[o],l=ei(s,u);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===A.date&&n===A.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var xt=class extends j{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(Jn(o)||Jn(s))return U;let u=ei(o.value,s.value);return u.valid?((Qn(o)||Qn(s))&&t.dirty(),{status:t.value,value:u.data}):(I(n,{code:x.invalid_intersection_types}),U)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};xt.create=(r,e,t)=>new xt({left:r,right:e,typeName:R.ZodIntersection,...F(t)});var Oe=class r extends j{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.array)return I(n,{code:x.invalid_type,expected:A.array,received:n.parsedType}),U;if(n.data.length<this._def.items.length)return I(n,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),U;!this._def.rest&&n.data.length>this._def.items.length&&(I(n,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...n.data].map((s,u)=>{let l=this._def.items[u]||this._def.rest;return l?l._parse(new we(n,s,n.path,u)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>te.mergeArray(t,s)):te.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};Oe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oe({items:r,typeName:R.ZodTuple,rest:null,...F(e)})};var Yr=class r extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.object)return I(n,{code:x.invalid_type,expected:A.object,received:n.parsedType}),U;let i=[],o=this._def.keyType,s=this._def.valueType;for(let u in n.data)i.push({key:o._parse(new we(n,u,n.path,u)),value:s._parse(new we(n,n.data[u],n.path,u))});return n.common.async?te.mergeObjectAsync(t,i):te.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof j?new r({keyType:e,valueType:t,typeName:R.ZodRecord,...F(n)}):new r({keyType:Xe.create(),valueType:e,typeName:R.ZodRecord,...F(t)})}},Wt=class extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.map)return I(n,{code:x.invalid_type,expected:A.map,received:n.parsedType}),U;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([u,l],p)=>({key:i._parse(new we(n,u,n.path,[p,"key"])),value:o._parse(new we(n,l,n.path,[p,"value"]))}));if(n.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let l of s){let p=await l.key,m=await l.value;if(p.status==="aborted"||m.status==="aborted")return U;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),u.set(p.value,m.value)}return{status:t.value,value:u}})}else{let u=new Map;for(let l of s){let p=l.key,m=l.value;if(p.status==="aborted"||m.status==="aborted")return U;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),u.set(p.value,m.value)}return{status:t.value,value:u}}}};Wt.create=(r,e,t)=>new Wt({valueType:e,keyType:r,typeName:R.ZodMap,...F(t)});var zt=class r extends j{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==A.set)return I(n,{code:x.invalid_type,expected:A.set,received:n.parsedType}),U;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(I(n,{code:x.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(I(n,{code:x.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function s(l){let p=new Set;for(let m of l){if(m.status==="aborted")return U;m.status==="dirty"&&t.dirty(),p.add(m.value)}return{status:t.value,value:p}}let u=[...n.data.values()].map((l,p)=>o._parse(new we(n,l,n.path,p)));return n.common.async?Promise.all(u).then(l=>s(l)):s(u)}min(e,t){return new r({...this._def,minSize:{value:e,message:O.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:O.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};zt.create=(r,e)=>new zt({valueType:r,minSize:null,maxSize:null,typeName:R.ZodSet,...F(e)});var Hr=class r extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==A.function)return I(t,{code:x.invalid_type,expected:A.function,received:t.parsedType}),U;function n(u,l){return qr({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zr(),vr].filter(p=>!!p),issueData:{code:x.invalid_arguments,argumentsError:l}})}function i(u,l){return qr({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zr(),vr].filter(p=>!!p),issueData:{code:x.invalid_return_type,returnTypeError:l}})}let o={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Qe){let u=this;return oe(async function(...l){let p=new ie([]),m=await u._def.args.parseAsync(l,o).catch(S=>{throw p.addIssue(n(l,S)),p}),g=await Reflect.apply(s,this,m);return await u._def.returns._def.type.parseAsync(g,o).catch(S=>{throw p.addIssue(i(g,S)),p})})}else{let u=this;return oe(function(...l){let p=u._def.args.safeParse(l,o);if(!p.success)throw new ie([n(l,p.error)]);let m=Reflect.apply(s,this,p.data),g=u._def.returns.safeParse(m,o);if(!g.success)throw new ie([i(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:Oe.create(e).rest(De.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||Oe.create([]).rest(De.create()),returns:t||De.create(),typeName:R.ZodFunction,...F(n)})}},_t=class extends j{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};_t.create=(r,e)=>new _t({getter:r,typeName:R.ZodLazy,...F(e)});var bt=class extends j{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return I(t,{received:t.data,code:x.invalid_literal,expected:this._def.value}),U}return{status:"valid",value:e.data}}get value(){return this._def.value}};bt.create=(r,e)=>new bt({value:r,typeName:R.ZodLiteral,...F(e)});function Fo(r,e){return new Et({values:r,typeName:R.ZodEnum,...F(e)})}var Et=class r extends j{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return I(t,{expected:$.joinValues(n),received:t.parsedType,code:x.invalid_type}),U}if(this._def.values.indexOf(e.data)===-1){let t=this._getOrReturnCtx(e),n=this._def.values;return I(t,{received:t.data,code:x.invalid_enum_value,options:n}),U}return oe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return r.create(e)}exclude(e){return r.create(this.options.filter(t=>!e.includes(t)))}};Et.create=Fo;var St=class extends j{_parse(e){let t=$.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==A.string&&n.parsedType!==A.number){let i=$.objectValues(t);return I(n,{expected:$.joinValues(i),received:n.parsedType,code:x.invalid_type}),U}if(t.indexOf(e.data)===-1){let i=$.objectValues(t);return I(n,{received:n.data,code:x.invalid_enum_value,options:i}),U}return oe(e.data)}get enum(){return this._def.values}};St.create=(r,e)=>new St({values:r,typeName:R.ZodNativeEnum,...F(e)});var Qe=class extends j{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==A.promise&&t.common.async===!1)return I(t,{code:x.invalid_type,expected:A.promise,received:t.parsedType}),U;let n=t.parsedType===A.promise?t.data:Promise.resolve(t.data);return oe(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Qe.create=(r,e)=>new Qe({type:r,typeName:R.ZodPromise,...F(e)});var de=class extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{I(n,s),s.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(u=>this._def.schema._parseAsync({data:u,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=u=>{let l=i.refinement(u,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){let u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?U:(u.status==="dirty"&&t.dirty(),s(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?U:(u.status==="dirty"&&t.dirty(),s(u.value).then(()=>({status:t.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xr(s))return s;let u=i.transform(s.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>xr(s)?Promise.resolve(i.transform(s.value,o)).then(u=>({status:t.value,value:u})):s);$.assertNever(i)}};de.create=(r,e,t)=>new de({schema:r,typeName:R.ZodEffects,effect:e,...F(t)});de.createWithPreprocess=(r,e,t)=>new de({schema:e,effect:{type:"preprocess",transform:r},typeName:R.ZodEffects,...F(t)});var Ee=class extends j{_parse(e){return this._getType(e)===A.undefined?oe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ee.create=(r,e)=>new Ee({innerType:r,typeName:R.ZodOptional,...F(e)});var We=class extends j{_parse(e){return this._getType(e)===A.null?oe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};We.create=(r,e)=>new We({innerType:r,typeName:R.ZodNullable,...F(e)});var At=class extends j{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===A.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};At.create=(r,e)=>new At({innerType:r,typeName:R.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...F(e)});var Zt=class extends j{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Vr(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ie(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ie(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Zt.create=(r,e)=>new Zt({innerType:r,typeName:R.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...F(e)});var qt=class extends j{_parse(e){if(this._getType(e)!==A.nan){let n=this._getOrReturnCtx(e);return I(n,{code:x.invalid_type,expected:A.nan,received:n.parsedType}),U}return{status:"valid",value:e.data}}};qt.create=r=>new qt({typeName:R.ZodNaN,...F(r)});var lc=Symbol("zod_brand"),Kr=class extends j{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},_r=class r extends j{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?U:o.status==="dirty"?(t.dirty(),Uo(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?U:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:R.ZodPipeline})}},Vt=class extends j{_parse(e){let t=this._def.innerType._parse(e);return xr(t)&&(t.value=Object.freeze(t.value)),t}};Vt.create=(r,e)=>new Vt({innerType:r,typeName:R.ZodReadonly,...F(e)});var jo=(r,e={},t)=>r?Je.create().superRefine((n,i)=>{var o,s;if(!r(n)){let u=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(s=(o=u.fatal)!==null&&o!==void 0?o:t)!==null&&s!==void 0?s:!0,p=typeof u=="string"?{message:u}:u;i.addIssue({code:"custom",...p,fatal:l})}}):Je.create(),hc={object:fe.lazycreate},R;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(R||(R={}));var pc=(r,e={message:`Input not instance of ${r.name}`})=>jo(t=>t instanceof r,e),Lo=Xe.create,No=pt.create,dc=qt.create,mc=dt.create,Po=mt.create,gc=gt.create,yc=Dt.create,wc=yt.create,vc=wt.create,xc=Je.create,_c=De.create,bc=Se.create,Ec=$t.create,Sc=$e.create,Ac=fe.create,Tc=fe.strictCreate,Bc=vt.create,Ic=Gr.create,Cc=xt.create,Oc=Oe.create,kc=Yr.create,Rc=Wt.create,Uc=zt.create,Fc=Hr.create,jc=_t.create,Lc=bt.create,Nc=Et.create,Pc=St.create,Mc=Qe.create,ko=de.create,Dc=Ee.create,$c=We.create,Wc=de.createWithPreprocess,zc=_r.create,Zc=()=>Lo().optional(),qc=()=>No().optional(),Vc=()=>Po().optional(),Gc={string:r=>Xe.create({...r,coerce:!0}),number:r=>pt.create({...r,coerce:!0}),boolean:r=>mt.create({...r,coerce:!0}),bigint:r=>dt.create({...r,coerce:!0}),date:r=>gt.create({...r,coerce:!0})},Yc=U,b=Object.freeze({__proto__:null,defaultErrorMap:vr,setErrorMap:Jf,getErrorMap:Zr,makeIssue:qr,EMPTY_PATH:Qf,addIssueToContext:I,ParseStatus:te,INVALID:U,DIRTY:Uo,OK:oe,isAborted:Jn,isDirty:Qn,isValid:xr,isAsync:Vr,get util(){return $},get objectUtil(){return Xn},ZodParsedType:A,getParsedType:Ke,ZodType:j,ZodString:Xe,ZodNumber:pt,ZodBigInt:dt,ZodBoolean:mt,ZodDate:gt,ZodSymbol:Dt,ZodUndefined:yt,ZodNull:wt,ZodAny:Je,ZodUnknown:De,ZodNever:Se,ZodVoid:$t,ZodArray:$e,ZodObject:fe,ZodUnion:vt,ZodDiscriminatedUnion:Gr,ZodIntersection:xt,ZodTuple:Oe,ZodRecord:Yr,ZodMap:Wt,ZodSet:zt,ZodFunction:Hr,ZodLazy:_t,ZodLiteral:bt,ZodEnum:Et,ZodNativeEnum:St,ZodPromise:Qe,ZodEffects:de,ZodTransformer:de,ZodOptional:Ee,ZodNullable:We,ZodDefault:At,ZodCatch:Zt,ZodNaN:qt,BRAND:lc,ZodBranded:Kr,ZodPipeline:_r,ZodReadonly:Vt,custom:jo,Schema:j,ZodSchema:j,late:hc,get ZodFirstPartyTypeKind(){return R},coerce:Gc,any:xc,array:Sc,bigint:mc,boolean:Po,date:gc,discriminatedUnion:Ic,effect:ko,enum:Nc,function:Fc,instanceof:pc,intersection:Cc,lazy:jc,literal:Lc,map:Rc,nan:dc,nativeEnum:Pc,never:bc,null:vc,nullable:$c,number:No,object:Ac,oboolean:Vc,onumber:qc,optional:Dc,ostring:Zc,pipeline:zc,preprocess:Wc,promise:Mc,record:kc,set:Uc,strictObject:Tc,string:Lo,symbol:yc,transformer:ko,tuple:Oc,undefined:wc,union:Bc,unknown:_c,void:Ec,NEVER:Yc,ZodIssueCode:x,quotelessJson:Xf,ZodError:ie});function Mo({fetch:r,GATEWAY_URL:e}){let t=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`,n=b.object({data:b.object({transactions:b.object({edges:b.array(b.object({node:b.record(b.any())}))})})});return i=>P(i).chain(H(o=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:{transactionIds:[o]}})}).then(s=>s.json()).then(n.parse).then(Vn(["data","transactions","edges","0","node"])))).toPromise()}var qo=ki(Zo(),1);var ti=(r="@permaweb/ao-connect")=>{let e=(0,qo.default)(r);return e.child=t=>ti(`${e.namespace}:${t}`),e.tap=(t,...n)=>Hn((...i)=>e(t,...n,...i)),e};function Qr(r){return be(Me([]),Pe((e,t)=>be(Gn([],t.name),st(t.value),pe(t.name,he,e))(e),{}),at(e=>e.length>1?e:e[0]))(r)}function Kt(r){return Wr([[lt(String),Ce(r)],[lt(Array),Zn(r)],[Ur,En]])}function ri(r=""){return r.endsWith("/")?ri(r.slice(0,-1)):r}function Xt(r){let e;return lt(ie,r)?(e=new Error(ul(r)),e.stack+=r.stack):lt(Error,r)?e=r:zn("message",r)?e=new Error(r.message):lt(String,r)?e=new Error(r):e=new Error("An error occurred"),e}function ul(r){return be(e=>function t(n,i,o){return Pe((s,u)=>be(Wr([[Ce(x.invalid_arguments),()=>t(u.argumentsError,422,"Invalid Arguments")],[Ce(x.invalid_return_type),()=>t(u.returnTypeError,500,"Invalid Return")],[Ce(x.invalid_union),()=>Dn(l=>t(l,400,"Invalid Union"),u.unionErrors)],[Ur,()=>[{...u,status:i,contextCode:o}]]]),ct(s))(u.code),[],n.issues)}(e,400,""),e=>Pe((t,n)=>{let{message:i,path:o,contextCode:s}=n,u=o[1]||o[0],l=s?`${s} `:"";return t.push(`${l}'${u}': ${i}.`),t},[],e),qn(" | "))(r)}var fl=b.object({id:b.string().min(1,{message:"message is required to be a message id"}),processId:b.string().min(1,{message:"process is required to be a process id"})});function Vo(){return r=>P(r).map(fl.parse).map(()=>r)}var br=b.object({name:b.string(),value:b.string()}),Go=b.function().args(b.object({id:b.string().min(1,{message:"message id is required"}),processId:b.string().min(1,{message:"process id is required"})})).returns(b.promise(b.any())),Yo=b.function().args(b.object({processId:b.string(),data:b.any(),tags:b.array(br),anchor:b.string().optional(),signer:b.any()})).returns(b.promise(b.object({messageId:b.string()}).passthrough())),Ho=b.function().args(b.object({data:b.any(),tags:b.array(br),signer:b.any()})).returns(b.promise(b.object({processId:b.string()}).passthrough())),Ko=b.function().args(b.object({suUrl:b.string().url(),processId:b.string()})).returns(b.promise(b.object({tags:b.array(br)}).passthrough())),Xo=b.function().args(b.string()).returns(b.promise(b.object({url:b.string()}))),Jo=b.function().args(b.string()).returns(b.promise(b.boolean())),Qo=b.function().args(b.string()).returns(b.promise(b.object({tags:b.array(br)}).passthrough())),en=b.function().args(b.object({data:b.any(),tags:b.array(br),target:b.string().optional(),anchor:b.string().optional()})).returns(b.promise(b.object({id:b.string(),raw:b.any()})));function ea({loadResult:r}){return r=H(Go.implement(r)),e=>P({id:e.id,processId:e.processId}).chain(r)}function ta(r){let e=Vo(r),t=ea(r);return({message:n,process:i})=>P({id:n,processId:i}).chain(e).chain(t).map(r.logger.tap('readResult result for message "%s": %O',n)).map(o=>o).bimap(Xt,ft).toPromise()}function cl({loadProcessMeta:r,locateScheduler:e,logger:t}){let n=(i,o,s)=>u=>o(u[i])?ge(u):je(`Tag '${i}': ${s}`);return r=H(Ko.implement(r)),e=H(Xo.implement(e)),i=>P(i).map(t.tap("Verifying Process")).map(t.tap("Locating Scheduler for Process to retrieve Process meta")).chain(e).chain(({url:o})=>r({suUrl:ri(o),processId:i})).map(ue("tags")).map(Qr).chain(n("Data-Protocol",Kt("ao"),"value 'ao' was not found on process")).chain(n("Type",Kt("Process"),"value 'Process' was not found on process")).chain(n("Module",ht,"was not found on process"))}function ra(r){let e=cl(r);return t=>P(t.id).chain(e).map(()=>t)}var ll=b.array(b.object({name:b.string(),value:b.string()}));function hl(){return r=>P(r.tags).map(Me([])).map(ct(he,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"},{name:"SDK",value:"ao"}])).map(ll.parse).map(pe("tags",he,r))}function pl({logger:r}){function e(t){return n=>ot(wr(t,"name"),n)}return t=>P(t).chain(yr(mr(t.data),()=>ge(t),()=>ge(Math.random().toString().slice(-4)).map(pe("data",he,t)).map(n=>be(ue("tags"),e("Content-Type"),st({name:"Content-Type",value:"text/plain"}),pe("tags",he,n))(n)).map(r.tap('added pseudo-random string as message "data"'))))}function na(r){let e=hl(r),t=pl(r),n=Yo.implement(r.deployMessage);return i=>P(i).chain(e).chain(t).chain(H(({id:o,data:s,tags:u,anchor:l,signer:p})=>n({processId:o,data:s,tags:u,anchor:l,signer:en.implement(p)}))).map(o=>pe("messageId",o.messageId,i))}function ia(r){let e=ra(r),t=na(r);return({process:n,data:i,tags:o,anchor:s,signer:u})=>P({id:n,data:i,tags:o,anchor:s,signer:u}).chain(e).chain(t).map(l=>l.messageId).bimap(Xt,ft).toPromise()}var Er=(r,e,t)=>n=>e(n[r])?ge(n):je(`Tag '${r}': ${t}`);function dl({loadTransactionMeta:r,logger:e}){return r=H(Qo.implement(r)),t=>P(t).chain(r).map(ue("tags")).map(Qr).chain(Er("Data-Protocol",Kt("ao"),"value 'ao' was not found on module")).chain(Er("Type",Kt("Module"),"value 'Module' was not found on module")).chain(Er("Module-Format",ht,"was not found on module")).chain(Er("Input-Encoding",ht,"was not found on module")).chain(Er("Output-Encoding",ht,"was not found on module")).bimap(e.tap("Verifying module source failed: %s"),e.tap("Verified module source"))}function ml({logger:r,validateScheduler:e}){return e=H(Jo.implement(e)),t=>P(t).chain(n=>e(n).chain(i=>i?ge(n):je(`Valid Scheduler-Location owned by ${n} not found`))).bimap(r.tap("Verifying scheduler failed: %s"),r.tap("Verified scheduler"))}function gl({logger:r}){return e=>P(e).map(r.tap("Checking for signer")).chain(t=>t?ge(t):je("signer not found"))}function oa(r){let e=r.logger.child("verifyInput");r={...r,logger:e};let t=dl(r),n=ml(r),i=gl(r);return o=>P(o).chain(s=>t(s.module).map(()=>s)).chain(s=>n(s.scheduler)).map(()=>o).chain(s=>i(s.signer).map(()=>s)).bimap(e.tap("Error when verify input: %s"),e.tap("Successfully verified inputs"))}var yl=b.array(b.object({name:b.string(),value:b.string()}));function wl(){return r=>P(r).map(ue("tags")).map(Me([])).map(ct(he,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:r.module},{name:"Scheduler",value:r.scheduler},{name:"SDK",value:"ao"}])).map(yl.parse).map(pe("tags",he,r))}function vl({logger:r}){function e(t){return n=>ot(wr(t,"name"),n)}return t=>P(t).chain(yr(mr(t.data),()=>ge(t),()=>ge(Math.random().toString().slice(-4)).map(pe("data",he,t)).map(n=>be(ue("tags"),e("Content-Type"),st({name:"Content-Type",value:"text/plain"}),pe("tags",he,n))(n)).map(r.tap('added pseudo-random string as process "data"'))))}function aa(r){let e=r.logger.child("uploadProcess");r={...r,logger:e};let t=wl(r),n=vl(r),i=Ho.implement(r.deployProcess);return o=>P(o).chain(t).chain(n).chain(H(({data:s,tags:u,signer:l})=>i({data:s,tags:u,signer:en.implement(l)}))).map(s=>pe("processId",s.processId,o))}function sa(r){let e=oa(r),t=aa(r);return({module:n,scheduler:i,signer:o,tags:s,data:u})=>P({module:n,scheduler:i,signer:o,tags:s,data:u}).chain(e).chain(t).map(l=>l.processId).bimap(Xt,ft).toPromise()}var xl="https://arweave.net",_l="https://ao-mu-1.onrender.com",bl="https://ao-cu-1.onrender.com";function ua({GATEWAY_URL:r=xl,MU_URL:e=_l,CU_URL:t=bl}={}){let n=ti("@permaweb/ao-sdk"),{locate:i,validate:o}=bn({cacheSize:100,GATEWAY_URL:r}),s=n.child("result"),u=ta({loadResult:uo({fetch,CU_URL:t,logger:s}),logger:s}),l=n.child("message"),p=ia({loadProcessMeta:fo({fetch}),locateScheduler:i,deployMessage:ao({fetch,MU_URL:e,logger:l}),logger:l}),m=n.child("spawn"),g=sa({loadTransactionMeta:Mo({fetch,GATEWAY_URL:r}),validateScheduler:o,deployProcess:so({fetch,MU_URL:e,logger:m}),logger:m});return{result:u,message:p,spawn:g}}var sn={};fs(sn,{createDataItemSigner:()=>Th});var xi=ki(Ca(),1);var th=Object.create,yi=Object.defineProperty,rh=Object.getOwnPropertyDescriptor,nh=Object.getOwnPropertyNames,ih=Object.getPrototypeOf,oh=Object.prototype.hasOwnProperty,qe=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ah=(r,e)=>{for(var t in e)yi(r,t,{get:e[t],enumerable:!0})},sh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nh(e))!oh.call(r,i)&&i!==t&&yi(r,i,{get:()=>e[i],enumerable:!(n=rh(e,i))||n.enumerable});return r},Ct=(r,e,t)=>(t=r!=null?th(ih(r)):{},sh(e||!r||!r.__esModule?yi(t,"default",{value:r,enumerable:!0}):t,r)),uh=qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});function e(t){var n=4,i=t.length,o=i%n;if(!o)return t;var s=i,u=n-o,l=i+u,p=Buffer.alloc(l);for(p.write(t);u--;)p.write("=",s++);return p.toString()}r.default=e}),fh=qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=uh();function t(l,p){return p===void 0&&(p="utf8"),Buffer.isBuffer(l)?o(l.toString("base64")):o(Buffer.from(l,p).toString("base64"))}function n(l,p){return p===void 0&&(p="utf8"),Buffer.from(i(l),"base64").toString(p)}function i(l){return l=l.toString(),e.default(l).replace(/\-/g,"+").replace(/_/g,"/")}function o(l){return l.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(l){return Buffer.from(i(l),"base64")}var u=t;u.encode=t,u.decode=n,u.toBase64=i,u.fromBase64=o,u.toBuffer=s,r.default=u}),wi=qe((r,e)=>{e.exports=fh().default,e.exports.default=e.exports}),ka=qe(r=>{"use strict";r.byteLength=l,r.toByteArray=m,r.fromByteArray=S;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,s=i.length;o<s;++o)e[o]=i[o],t[i.charCodeAt(o)]=o;var o,s;t[45]=62,t[95]=63;function u(T){var E=T.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var B=T.indexOf("=");B===-1&&(B=E);var C=B===E?0:4-B%4;return[B,C]}function l(T){var E=u(T),B=E[0],C=E[1];return(B+C)*3/4-C}function p(T,E,B){return(E+B)*3/4-B}function m(T){var E,B=u(T),C=B[0],N=B[1],D=new n(p(T,C,N)),L=0,Z=N>0?C-4:C,z;for(z=0;z<Z;z+=4)E=t[T.charCodeAt(z)]<<18|t[T.charCodeAt(z+1)]<<12|t[T.charCodeAt(z+2)]<<6|t[T.charCodeAt(z+3)],D[L++]=E>>16&255,D[L++]=E>>8&255,D[L++]=E&255;return N===2&&(E=t[T.charCodeAt(z)]<<2|t[T.charCodeAt(z+1)]>>4,D[L++]=E&255),N===1&&(E=t[T.charCodeAt(z)]<<10|t[T.charCodeAt(z+1)]<<4|t[T.charCodeAt(z+2)]>>2,D[L++]=E>>8&255,D[L++]=E&255),D}function g(T){return e[T>>18&63]+e[T>>12&63]+e[T>>6&63]+e[T&63]}function v(T,E,B){for(var C,N=[],D=E;D<B;D+=3)C=(T[D]<<16&16711680)+(T[D+1]<<8&65280)+(T[D+2]&255),N.push(g(C));return N.join("")}function S(T){for(var E,B=T.length,C=B%3,N=[],D=16383,L=0,Z=B-C;L<Z;L+=D)N.push(v(T,L,L+D>Z?Z:L+D));return C===1?(E=T[B-1],N.push(e[E>>2]+e[E<<4&63]+"==")):C===2&&(E=(T[B-2]<<8)+T[B-1],N.push(e[E>>10]+e[E>>4&63]+e[E<<2&63]+"=")),N.join("")}}),Ra=qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.b64UrlDecode=r.b64UrlEncode=r.bufferTob64Url=r.bufferTob64=r.b64UrlToBuffer=r.stringToB64Url=r.stringToBuffer=r.bufferToString=r.b64UrlToString=r.concatBuffers=void 0;var e=ka();function t(v){let S=0;for(let B=0;B<v.length;B++)S+=v[B].byteLength;let T=new Uint8Array(S),E=0;T.set(new Uint8Array(v[0]),E),E+=v[0].byteLength;for(let B=1;B<v.length;B++)T.set(new Uint8Array(v[B]),E),E+=v[B].byteLength;return T}r.concatBuffers=t;function n(v){let S=u(v);return i(S)}r.b64UrlToString=n;function i(v){return new TextDecoder("utf-8",{fatal:!0}).decode(v)}r.bufferToString=i;function o(v){return new TextEncoder().encode(v)}r.stringToBuffer=o;function s(v){return p(o(v))}r.stringToB64Url=s;function u(v){return new Uint8Array(e.toByteArray(g(v)))}r.b64UrlToBuffer=u;function l(v){return e.fromByteArray(new Uint8Array(v))}r.bufferTob64=l;function p(v){return m(l(v))}r.bufferTob64Url=p;function m(v){return v.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}r.b64UrlEncode=m;function g(v){v=v.replace(/\-/g,"+").replace(/\_/g,"/");let S;return v.length%4==0?S=0:S=4-v.length%4,v.concat("=".repeat(S))}r.b64UrlDecode=g}),ch=qe(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=Ra(),t=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let n=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),i=await this.driver.exportKey("jwk",n.privateKey);return{kty:i.kty,e:i.e,n:i.n,d:i.d,p:i.p,q:i.q,dp:i.dp,dq:i.dq,qi:i.qi}}async sign(n,i,{saltLength:o}={}){let s=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(n),i);return new Uint8Array(s)}async hash(n,i="SHA-256"){let o=await this.driver.digest(i,n);return new Uint8Array(o)}async verify(n,i,o){let s={kty:"RSA",e:"AQAB",n},u=await this.jwkToPublicCryptoKey(s),l=await this.driver.digest("SHA-256",i),p=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,o,i),m=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,o,i),g=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((u.algorithm.modulusLength-1)/8)-l.byteLength-2},u,o,i);return p||m||g}async jwkToCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let n=crypto?.subtle;return n===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(i=>typeof n[i]=="function")}async encrypt(n,i,o){let s=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:o?e.stringToBuffer(o):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=new Uint8Array(16);crypto.getRandomValues(l);let p=await this.driver.encrypt({name:"AES-CBC",iv:l},u,n);return e.concatBuffers([l,p])}async decrypt(n,i,o){let s=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:o?e.stringToBuffer(o):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=n.slice(0,16),p=await this.driver.decrypt({name:"AES-CBC",iv:l},u,n.slice(16));return e.concatBuffers([p])}};r.default=t}),lh=qe(r=>{r.read=function(e,t,n,i,o){var s,u,l=o*8-i-1,p=(1<<l)-1,m=p>>1,g=-7,v=n?o-1:0,S=n?-1:1,T=e[t+v];for(v+=S,s=T&(1<<-g)-1,T>>=-g,g+=l;g>0;s=s*256+e[t+v],v+=S,g-=8);for(u=s&(1<<-g)-1,s>>=-g,g+=i;g>0;u=u*256+e[t+v],v+=S,g-=8);if(s===0)s=1-m;else{if(s===p)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,i),s=s-m}return(T?-1:1)*u*Math.pow(2,s-i)},r.write=function(e,t,n,i,o,s){var u,l,p,m=s*8-o-1,g=(1<<m)-1,v=g>>1,S=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=i?0:s-1,E=i?1:-1,B=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,u=g):(u=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+v>=1?t+=S/p:t+=S*Math.pow(2,1-v),t*p>=2&&(u++,p/=2),u+v>=g?(l=0,u=g):u+v>=1?(l=(t*p-1)*Math.pow(2,o),u=u+v):(l=t*Math.pow(2,v-1)*Math.pow(2,o),u=0));o>=8;e[n+T]=l&255,T+=E,l/=256,o-=8);for(u=u<<o|l,m+=o;m>0;e[n+T]=u&255,T+=E,u/=256,m-=8);e[n+T-E]|=B*128}}),di=qe(r=>{"use strict";var e=ka(),t=lh(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let a=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(a,f),a.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s(a){if(a>i)throw new RangeError('The value "'+a+'" is invalid for option "size"');let f=new Uint8Array(a);return Object.setPrototypeOf(f,u.prototype),f}function u(a,f,c){if(typeof a=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(a)}return l(a,f,c)}u.poolSize=8192;function l(a,f,c){if(typeof a=="string")return v(a,f);if(ArrayBuffer.isView(a))return T(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(Be(a,ArrayBuffer)||a&&Be(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Be(a,SharedArrayBuffer)||a&&Be(a.buffer,SharedArrayBuffer)))return E(a,f,c);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=a.valueOf&&a.valueOf();if(h!=null&&h!==a)return u.from(h,f,c);let d=B(a);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return u.from(a[Symbol.toPrimitive]("string"),f,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}u.from=function(a,f,c){return l(a,f,c)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function m(a,f,c){return p(a),a<=0?s(a):f!==void 0?typeof c=="string"?s(a).fill(f,c):s(a).fill(f):s(a)}u.alloc=function(a,f,c){return m(a,f,c)};function g(a){return p(a),s(a<0?0:C(a)|0)}u.allocUnsafe=function(a){return g(a)},u.allocUnsafeSlow=function(a){return g(a)};function v(a,f){if((typeof f!="string"||f==="")&&(f="utf8"),!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let c=D(a,f)|0,h=s(c),d=h.write(a,f);return d!==c&&(h=h.slice(0,d)),h}function S(a){let f=a.length<0?0:C(a.length)|0,c=s(f);for(let h=0;h<f;h+=1)c[h]=a[h]&255;return c}function T(a){if(Be(a,Uint8Array)){let f=new Uint8Array(a);return E(f.buffer,f.byteOffset,f.byteLength)}return S(a)}function E(a,f,c){if(f<0||a.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<f+(c||0))throw new RangeError('"length" is outside of buffer bounds');let h;return f===void 0&&c===void 0?h=new Uint8Array(a):c===void 0?h=new Uint8Array(a,f):h=new Uint8Array(a,f,c),Object.setPrototypeOf(h,u.prototype),h}function B(a){if(u.isBuffer(a)){let f=C(a.length)|0,c=s(f);return c.length===0||a.copy(c,0,0,f),c}if(a.length!==void 0)return typeof a.length!="number"||cn(a.length)?s(0):S(a);if(a.type==="Buffer"&&Array.isArray(a.data))return S(a.data)}function C(a){if(a>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return a|0}function N(a){return+a!=a&&(a=0),u.alloc(+a)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,f){if(Be(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),Be(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(a)||!u.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;let c=a.length,h=f.length;for(let d=0,w=Math.min(c,h);d<w;++d)if(a[d]!==f[d]){c=a[d],h=f[d];break}return c<h?-1:h<c?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let c;if(f===void 0)for(f=0,c=0;c<a.length;++c)f+=a[c].length;let h=u.allocUnsafe(f),d=0;for(c=0;c<a.length;++c){let w=a[c];if(Be(w,Uint8Array))d+w.length>h.length?(u.isBuffer(w)||(w=u.from(w)),w.copy(h,d)):Uint8Array.prototype.set.call(h,w,d);else if(u.isBuffer(w))w.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=w.length}return h};function D(a,f){if(u.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||Be(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&c===0)return 0;let d=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return fn(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Oi(a).length;default:if(d)return h?-1:fn(a).length;f=(""+f).toLowerCase(),d=!0}}u.byteLength=D;function L(a,f,c){let h=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,f>>>=0,c<=f))return"";for(a||(a="utf8");;)switch(a){case"hex":return Ha(this,f,c);case"utf8":case"utf-8":return _i(this,f,c);case"ascii":return Ga(this,f,c);case"latin1":case"binary":return Ya(this,f,c);case"base64":return qa(this,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ka(this,f,c);default:if(h)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),h=!0}}u.prototype._isBuffer=!0;function Z(a,f,c){let h=a[f];a[f]=a[c],a[c]=h}u.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<a;f+=2)Z(this,f,f+1);return this},u.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<a;f+=4)Z(this,f,f+3),Z(this,f+1,f+2);return this},u.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<a;f+=8)Z(this,f,f+7),Z(this,f+1,f+6),Z(this,f+2,f+5),Z(this,f+3,f+4);return this},u.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?_i(this,0,a):L.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="",f=r.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(a,f,c,h,d){if(Be(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(f===void 0&&(f=0),c===void 0&&(c=a?a.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),f<0||c>a.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&f>=c)return 0;if(h>=d)return-1;if(f>=c)return 1;if(f>>>=0,c>>>=0,h>>>=0,d>>>=0,this===a)return 0;let w=d-h,_=c-f,q=Math.min(w,_),ee=this.slice(h,d),Y=a.slice(f,c);for(let V=0;V<q;++V)if(ee[V]!==Y[V]){w=ee[V],_=Y[V];break}return w<_?-1:_<w?1:0};function z(a,f,c,h,d){if(a.length===0)return-1;if(typeof c=="string"?(h=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,cn(c)&&(c=d?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(d)return-1;c=a.length-1}else if(c<0)if(d)c=0;else return-1;if(typeof f=="string"&&(f=u.from(f,h)),u.isBuffer(f))return f.length===0?-1:le(a,f,c,h,d);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(a,f,c):Uint8Array.prototype.lastIndexOf.call(a,f,c):le(a,[f],c,h,d);throw new TypeError("val must be string, number or Buffer")}function le(a,f,c,h,d){let w=1,_=a.length,q=f.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(a.length<2||f.length<2)return-1;w=2,_/=2,q/=2,c/=2}function ee(V,X){return w===1?V[X]:V.readUInt16BE(X*w)}let Y;if(d){let V=-1;for(Y=c;Y<_;Y++)if(ee(a,Y)===ee(f,V===-1?0:Y-V)){if(V===-1&&(V=Y),Y-V+1===q)return V*w}else V!==-1&&(Y-=Y-V),V=-1}else for(c+q>_&&(c=_-q),Y=c;Y>=0;Y--){let V=!0;for(let X=0;X<q;X++)if(ee(a,Y+X)!==ee(f,X)){V=!1;break}if(V)return Y}return-1}u.prototype.includes=function(a,f,c){return this.indexOf(a,f,c)!==-1},u.prototype.indexOf=function(a,f,c){return z(this,a,f,c,!0)},u.prototype.lastIndexOf=function(a,f,c){return z(this,a,f,c,!1)};function rt(a,f,c,h){c=Number(c)||0;let d=a.length-c;h?(h=Number(h),h>d&&(h=d)):h=d;let w=f.length;h>w/2&&(h=w/2);let _;for(_=0;_<h;++_){let q=parseInt(f.substr(_*2,2),16);if(cn(q))return _;a[c+_]=q}return _}function Ot(a,f,c,h){return Tr(fn(f,a.length-c),a,c,h)}function Wa(a,f,c,h){return Tr(es(f),a,c,h)}function za(a,f,c,h){return Tr(Oi(f),a,c,h)}function Za(a,f,c,h){return Tr(ts(f,a.length-c),a,c,h)}u.prototype.write=function(a,f,c,h){if(f===void 0)h="utf8",c=this.length,f=0;else if(c===void 0&&typeof f=="string")h=f,c=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(c)?(c=c>>>0,h===void 0&&(h="utf8")):(h=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-f;if((c===void 0||c>d)&&(c=d),a.length>0&&(c<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let w=!1;for(;;)switch(h){case"hex":return rt(this,a,f,c);case"utf8":case"utf-8":return Ot(this,a,f,c);case"ascii":case"latin1":case"binary":return Wa(this,a,f,c);case"base64":return za(this,a,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Za(this,a,f,c);default:if(w)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),w=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function qa(a,f,c){return f===0&&c===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(f,c))}function _i(a,f,c){c=Math.min(a.length,c);let h=[],d=f;for(;d<c;){let w=a[d],_=null,q=w>239?4:w>223?3:w>191?2:1;if(d+q<=c){let ee,Y,V,X;switch(q){case 1:w<128&&(_=w);break;case 2:ee=a[d+1],(ee&192)===128&&(X=(w&31)<<6|ee&63,X>127&&(_=X));break;case 3:ee=a[d+1],Y=a[d+2],(ee&192)===128&&(Y&192)===128&&(X=(w&15)<<12|(ee&63)<<6|Y&63,X>2047&&(X<55296||X>57343)&&(_=X));break;case 4:ee=a[d+1],Y=a[d+2],V=a[d+3],(ee&192)===128&&(Y&192)===128&&(V&192)===128&&(X=(w&15)<<18|(ee&63)<<12|(Y&63)<<6|V&63,X>65535&&X<1114112&&(_=X))}}_===null?(_=65533,q=1):_>65535&&(_-=65536,h.push(_>>>10&1023|55296),_=56320|_&1023),h.push(_),d+=q}return Va(h)}var bi=4096;function Va(a){let f=a.length;if(f<=bi)return String.fromCharCode.apply(String,a);let c="",h=0;for(;h<f;)c+=String.fromCharCode.apply(String,a.slice(h,h+=bi));return c}function Ga(a,f,c){let h="";c=Math.min(a.length,c);for(let d=f;d<c;++d)h+=String.fromCharCode(a[d]&127);return h}function Ya(a,f,c){let h="";c=Math.min(a.length,c);for(let d=f;d<c;++d)h+=String.fromCharCode(a[d]);return h}function Ha(a,f,c){let h=a.length;(!f||f<0)&&(f=0),(!c||c<0||c>h)&&(c=h);let d="";for(let w=f;w<c;++w)d+=rs[a[w]];return d}function Ka(a,f,c){let h=a.slice(f,c),d="";for(let w=0;w<h.length-1;w+=2)d+=String.fromCharCode(h[w]+h[w+1]*256);return d}u.prototype.slice=function(a,f){let c=this.length;a=~~a,f=f===void 0?c:~~f,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),f<0?(f+=c,f<0&&(f=0)):f>c&&(f=c),f<a&&(f=a);let h=this.subarray(a,f);return Object.setPrototypeOf(h,u.prototype),h};function J(a,f,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+f>c)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,f,c){a=a>>>0,f=f>>>0,c||J(a,f,this.length);let h=this[a],d=1,w=0;for(;++w<f&&(d*=256);)h+=this[a+w]*d;return h},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,f,c){a=a>>>0,f=f>>>0,c||J(a,f,this.length);let h=this[a+--f],d=1;for(;f>0&&(d*=256);)h+=this[a+--f]*d;return h},u.prototype.readUint8=u.prototype.readUInt8=function(a,f){return a=a>>>0,f||J(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||J(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||J(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||J(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=Ve(function(a){a=a>>>0,Rt(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&nr(a,this.length-8);let h=f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,d=this[++a]+this[++a]*2**8+this[++a]*2**16+c*2**24;return BigInt(h)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ve(function(a){a=a>>>0,Rt(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&nr(a,this.length-8);let h=f*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],d=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+c;return(BigInt(h)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(a,f,c){a=a>>>0,f=f>>>0,c||J(a,f,this.length);let h=this[a],d=1,w=0;for(;++w<f&&(d*=256);)h+=this[a+w]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*f)),h},u.prototype.readIntBE=function(a,f,c){a=a>>>0,f=f>>>0,c||J(a,f,this.length);let h=f,d=1,w=this[a+--h];for(;h>0&&(d*=256);)w+=this[a+--h]*d;return d*=128,w>=d&&(w-=Math.pow(2,8*f)),w},u.prototype.readInt8=function(a,f){return a=a>>>0,f||J(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,f){a=a>>>0,f||J(a,2,this.length);let c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c},u.prototype.readInt16BE=function(a,f){a=a>>>0,f||J(a,2,this.length);let c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c},u.prototype.readInt32LE=function(a,f){return a=a>>>0,f||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,f){return a=a>>>0,f||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=Ve(function(a){a=a>>>0,Rt(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&nr(a,this.length-8);let h=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(c<<24);return(BigInt(h)<<BigInt(32))+BigInt(f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),u.prototype.readBigInt64BE=Ve(function(a){a=a>>>0,Rt(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&nr(a,this.length-8);let h=(f<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(h)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+c)}),u.prototype.readFloatLE=function(a,f){return a=a>>>0,f||J(a,4,this.length),t.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,f){return a=a>>>0,f||J(a,4,this.length),t.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||J(a,8,this.length),t.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||J(a,8,this.length),t.read(this,a,!1,52,8)};function ae(a,f,c,h,d,w){if(!u.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>d||f<w)throw new RangeError('"value" argument is out of bounds');if(c+h>a.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,f,c,h){if(a=+a,f=f>>>0,c=c>>>0,!h){let _=Math.pow(2,8*c)-1;ae(this,a,f,c,_,0)}let d=1,w=0;for(this[f]=a&255;++w<c&&(d*=256);)this[f+w]=a/d&255;return f+c},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,f,c,h){if(a=+a,f=f>>>0,c=c>>>0,!h){let _=Math.pow(2,8*c)-1;ae(this,a,f,c,_,0)}let d=c-1,w=1;for(this[f+d]=a&255;--d>=0&&(w*=256);)this[f+d]=a/w&255;return f+c},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,1,255,0),this[f]=a&255,f+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function Ei(a,f,c,h,d){Ci(f,h,d,a,c,7);let w=Number(f&BigInt(4294967295));a[c++]=w,w=w>>8,a[c++]=w,w=w>>8,a[c++]=w,w=w>>8,a[c++]=w;let _=Number(f>>BigInt(32)&BigInt(4294967295));return a[c++]=_,_=_>>8,a[c++]=_,_=_>>8,a[c++]=_,_=_>>8,a[c++]=_,c}function Si(a,f,c,h,d){Ci(f,h,d,a,c,7);let w=Number(f&BigInt(4294967295));a[c+7]=w,w=w>>8,a[c+6]=w,w=w>>8,a[c+5]=w,w=w>>8,a[c+4]=w;let _=Number(f>>BigInt(32)&BigInt(4294967295));return a[c+3]=_,_=_>>8,a[c+2]=_,_=_>>8,a[c+1]=_,_=_>>8,a[c]=_,c+8}u.prototype.writeBigUInt64LE=Ve(function(a,f=0){return Ei(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ve(function(a,f=0){return Si(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,f,c,h){if(a=+a,f=f>>>0,!h){let q=Math.pow(2,8*c-1);ae(this,a,f,c,q-1,-q)}let d=0,w=1,_=0;for(this[f]=a&255;++d<c&&(w*=256);)a<0&&_===0&&this[f+d-1]!==0&&(_=1),this[f+d]=(a/w>>0)-_&255;return f+c},u.prototype.writeIntBE=function(a,f,c,h){if(a=+a,f=f>>>0,!h){let q=Math.pow(2,8*c-1);ae(this,a,f,c,q-1,-q)}let d=c-1,w=1,_=0;for(this[f+d]=a&255;--d>=0&&(w*=256);)a<0&&_===0&&this[f+d+1]!==0&&(_=1),this[f+d]=(a/w>>0)-_&255;return f+c},u.prototype.writeInt8=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},u.prototype.writeInt16LE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeInt16BE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeInt32LE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},u.prototype.writeInt32BE=function(a,f,c){return a=+a,f=f>>>0,c||ae(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},u.prototype.writeBigInt64LE=Ve(function(a,f=0){return Ei(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ve(function(a,f=0){return Si(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ai(a,f,c,h,d,w){if(c+h>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Ti(a,f,c,h,d){return f=+f,c=c>>>0,d||Ai(a,f,c,4,34028234663852886e22,-34028234663852886e22),t.write(a,f,c,h,23,4),c+4}u.prototype.writeFloatLE=function(a,f,c){return Ti(this,a,f,!0,c)},u.prototype.writeFloatBE=function(a,f,c){return Ti(this,a,f,!1,c)};function Bi(a,f,c,h,d){return f=+f,c=c>>>0,d||Ai(a,f,c,8,17976931348623157e292,-17976931348623157e292),t.write(a,f,c,h,52,8),c+8}u.prototype.writeDoubleLE=function(a,f,c){return Bi(this,a,f,!0,c)},u.prototype.writeDoubleBE=function(a,f,c){return Bi(this,a,f,!1,c)},u.prototype.copy=function(a,f,c,h){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),!h&&h!==0&&(h=this.length),f>=a.length&&(f=a.length),f||(f=0),h>0&&h<c&&(h=c),h===c||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),a.length-f<h-c&&(h=a.length-f+c);let d=h-c;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,c,h):Uint8Array.prototype.set.call(a,this.subarray(c,h),f),d},u.prototype.fill=function(a,f,c,h){if(typeof a=="string"){if(typeof f=="string"?(h=f,f=0,c=this.length):typeof c=="string"&&(h=c,c=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!u.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(a.length===1){let w=a.charCodeAt(0);(h==="utf8"&&w<128||h==="latin1")&&(a=w)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<c)throw new RangeError("Out of range index");if(c<=f)return this;f=f>>>0,c=c===void 0?this.length:c>>>0,a||(a=0);let d;if(typeof a=="number")for(d=f;d<c;++d)this[d]=a;else{let w=u.isBuffer(a)?a:u.from(a,h),_=w.length;if(_===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(d=0;d<c-f;++d)this[d+f]=w[d%_]}return this};var kt={};function un(a,f,c){kt[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}un("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),un("ERR_INVALID_ARG_TYPE",function(a,f){return`The "${a}" argument must be of type number. Received type ${typeof f}`},TypeError),un("ERR_OUT_OF_RANGE",function(a,f,c){let h=`The value of "${a}" is out of range.`,d=c;return Number.isInteger(c)&&Math.abs(c)>2**32?d=Ii(String(c)):typeof c=="bigint"&&(d=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(d=Ii(d)),d+="n"),h+=` It must be ${f}. Received ${d}`,h},RangeError);function Ii(a){let f="",c=a.length,h=a[0]==="-"?1:0;for(;c>=h+4;c-=3)f=`_${a.slice(c-3,c)}${f}`;return`${a.slice(0,c)}${f}`}function Xa(a,f,c){Rt(f,"offset"),(a[f]===void 0||a[f+c]===void 0)&&nr(f,a.length-(c+1))}function Ci(a,f,c,h,d,w){if(a>c||a<f){let _=typeof f=="bigint"?"n":"",q;throw w>3?f===0||f===BigInt(0)?q=`>= 0${_} and < 2${_} ** ${(w+1)*8}${_}`:q=`>= -(2${_} ** ${(w+1)*8-1}${_}) and < 2 ** ${(w+1)*8-1}${_}`:q=`>= ${f}${_} and <= ${c}${_}`,new kt.ERR_OUT_OF_RANGE("value",q,a)}Xa(h,d,w)}function Rt(a,f){if(typeof a!="number")throw new kt.ERR_INVALID_ARG_TYPE(f,"number",a)}function nr(a,f,c){throw Math.floor(a)!==a?(Rt(a,c),new kt.ERR_OUT_OF_RANGE(c||"offset","an integer",a)):f<0?new kt.ERR_BUFFER_OUT_OF_BOUNDS:new kt.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${f}`,a)}var Ja=/[^+/0-9A-Za-z-_]/g;function Qa(a){if(a=a.split("=")[0],a=a.trim().replace(Ja,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function fn(a,f){f=f||1/0;let c,h=a.length,d=null,w=[];for(let _=0;_<h;++_){if(c=a.charCodeAt(_),c>55295&&c<57344){if(!d){if(c>56319){(f-=3)>-1&&w.push(239,191,189);continue}else if(_+1===h){(f-=3)>-1&&w.push(239,191,189);continue}d=c;continue}if(c<56320){(f-=3)>-1&&w.push(239,191,189),d=c;continue}c=(d-55296<<10|c-56320)+65536}else d&&(f-=3)>-1&&w.push(239,191,189);if(d=null,c<128){if((f-=1)<0)break;w.push(c)}else if(c<2048){if((f-=2)<0)break;w.push(c>>6|192,c&63|128)}else if(c<65536){if((f-=3)<0)break;w.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((f-=4)<0)break;w.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return w}function es(a){let f=[];for(let c=0;c<a.length;++c)f.push(a.charCodeAt(c)&255);return f}function ts(a,f){let c,h,d,w=[];for(let _=0;_<a.length&&!((f-=2)<0);++_)c=a.charCodeAt(_),h=c>>8,d=c%256,w.push(d),w.push(h);return w}function Oi(a){return e.toByteArray(Qa(a))}function Tr(a,f,c,h){let d;for(d=0;d<h&&!(d+c>=f.length||d>=a.length);++d)f[d+c]=a[d];return d}function Be(a,f){return a instanceof f||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===f.name}function cn(a){return a!==a}var rs=function(){let a="0123456789abcdef",f=new Array(256);for(let c=0;c<16;++c){let h=c*16;for(let d=0;d<16;++d)f[h+d]=a[c]+a[d]}return f}();function Ve(a){return typeof BigInt>"u"?ns:a}function ns(){throw new Error("BigInt not supported")}}),hh=qe((r,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:di().Buffer,Crypto:window.crypto}):e.exports={Buffer:di().Buffer,Crypto:crypto}}),Ua={};ah(Ua,{AVSCTap:()=>an,ArweaveSigner:()=>La,DataItem:()=>on,MAX_TAG_BYTES:()=>vi,MIN_BINARY_SIZE:()=>Ma,SIG_CONFIG:()=>Ar,SignatureConfig:()=>Te,Signer:()=>ph,createData:()=>Sh,deserializeTags:()=>gi,indexToType:()=>Na,serializeTags:()=>Pa,tagsExceedLimit:()=>xh});var ph=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(r,e,t,n){throw new Error("You must implement verify method on child")}},dh=Ct(wi(),1),Ae=Ct(Ra(),1);async function Fa(r){if(Array.isArray(r)){let i=(0,Ae.concatBuffers)([(0,Ae.stringToBuffer)("list"),(0,Ae.stringToBuffer)(r.length.toString())]);return await ja(r,await Ze().hash(i,"SHA-384"))}let e=r,t=(0,Ae.concatBuffers)([(0,Ae.stringToBuffer)("blob"),(0,Ae.stringToBuffer)(e.byteLength.toString())]),n=(0,Ae.concatBuffers)([await Ze().hash(t,"SHA-384"),await Ze().hash(e,"SHA-384")]);return await Ze().hash(n,"SHA-384")}async function ja(r,e){if(r.length<1)return e;let t=(0,Ae.concatBuffers)([e,await Fa(r[0])]),n=await Ze().hash(t,"SHA-384");return await ja(r.slice(1),n)}var pi=Ct(ch(),1),mh=pi.default.default?pi.default.default:pi.default,gh=class extends mh{getPublicKey(r){throw new Error("Unimplemented")}},yh;function Ze(){return yh??=new gh}var Te;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA",r[r.INJECTEDAPTOS=5]="INJECTEDAPTOS",r[r.MULTIAPTOS=6]="MULTIAPTOS",r[r.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Te||(Te={}));var Ar={[Te.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Te.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Te.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Te.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Te.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Te.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[Te.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},La=class{signatureType=1;ownerLength=Ar[1].pubLength;signatureLength=Ar[1].sigLength;jwk;pk;constructor(r){this.pk=r.n,this.jwk=r}get publicKey(){return dh.default.toBuffer(this.pk)}sign(r){return Ze().sign(this.jwk,r)}static async verify(r,e,t){return await Ze().verify(r,e,t)}},Na={1:La},Ue=Ct(wi(),1);async function mi(r){return Fa([(0,Ae.stringToBuffer)("dataitem"),(0,Ae.stringToBuffer)("1"),(0,Ae.stringToBuffer)(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData])}async function wh(r,e){let t=await mi(r),n=await e.sign(t),i=await Ze().hash(n);return{signature:Buffer.from(n),id:Buffer.from(i)}}async function vh(r,e){let{signature:t,id:n}=await wh(r,e);return r.getRaw().set(t,2),n}var an=class{buf;pos;constructor(r=Buffer.alloc(vi),e=0){this.buf=r,this.pos=e}writeTags(r){if(!Array.isArray(r))throw new Error("input must be array");let e=r.length,t;if(e)for(this.writeLong(e),t=0;t<e;t++){let n=r[t];if(n?.name===void 0||n?.value===void 0)throw new Error(`Invalid tag format for ${n}, expected {name:string, value: string}`);this.writeString(n.name),this.writeString(n.value)}this.writeLong(0)}toBuffer(){let r=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(r,0,0,this.pos),r}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(r){let e=this.buf,t,n;if(r>=-1073741824&&r<1073741824){n=r>=0?r<<1:~r<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{t=r>=0?r*2:-r*2-1;do e[this.pos]=t&127,t/=128;while(t>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(r){let e=Buffer.byteLength(r),t=this.buf;this.writeLong(e);let n=this.pos;if(this.pos+=e,!(this.pos>t.length)){if(e>64)this.buf.write(r,this.pos-e,e,"utf8");else{let i,o,s,u;for(i=0,o=e;i<o;i++)s=r.charCodeAt(i),s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&((u=r.charCodeAt(i+1))&64512)===56320?(s=65536+((s&1023)<<10)+(u&1023),i++,t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}this.buf=t}}readLong(){let r=0,e=0,t=this.buf,n,i,o,s;do n=t[this.pos++],i=n&128,r|=(n&127)<<e,e+=7;while(i&&e<28);if(i){o=r,s=268435456;do n=t[this.pos++],o+=(n&127)*s,s*=128;while(n&128);return(o%2?-(o+1):o)/2}return r>>1^-(r&1)}skipLong(){let r=this.buf;for(;r[this.pos++]&128;);}readTags(){let r=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let t=this.readString(),n=this.readString();r.push({name:t,value:n})}return r}readString(){let r=this.readLong(),e=this.pos,t=this.buf;if(this.pos+=r,!(this.pos>t.length))return this.buf.slice(e,e+r).toString()}};function Pa(r){let e=new an;return e.writeTags(r),e.toBuffer()}function xh(r){let e=new an;return e.writeTags(r),e.tagsExceedLimit()}function gi(r){return new an(r).readTags()}function tt(r){let e=0;for(let t=r.length-1;t>=0;t--)e=e*256+r[t];return e}function _h(r){if(r>29)throw new Error("Short too long");let e=[0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}function Oa(r){let e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}var bh=Ct(hh(),1),rr=Ct(di(),1),vi=4096,Ma=80,on=class{binary;_id;constructor(r){this.binary=r}static isDataItem(r){return r.binary!==void 0}get signatureType(){let r=tt(this.binary.subarray(0,2));if(Te?.[r]!==void 0)return r;throw new Error("Unknown signature type: "+r)}async isValid(){return on.verify(this.binary)}get id(){return(async()=>Ue.default.encode(await this.rawId))()}set id(r){this._id=Ue.default.toBuffer(r)}get rawId(){return(async()=>rr.Buffer.from(await bh.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(r){this._id=r}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return Ue.default.encode(this.rawSignature)}set rawOwner(r){if(r.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${r.byteLength} bytes.`);this.binary.set(r,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return Ar[this.signatureType].sigLength}get owner(){return Ue.default.encode(this.rawOwner)}get ownerLength(){return Ar[this.signatureType].pubLength}get rawTarget(){let r=this.getTargetStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):rr.Buffer.alloc(0)}get target(){return Ue.default.encode(this.rawTarget)}get rawAnchor(){let r=this.getAnchorStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):rr.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let r=this.getTagsStart(),e=tt(this.binary.subarray(r+8,r+16));return this.binary.subarray(r+16,r+16+e)}get tags(){let r=this.getTagsStart();if(tt(this.binary.subarray(r,r+8))==0)return[];let e=tt(this.binary.subarray(r+8,r+16));return gi(rr.Buffer.from(this.binary.subarray(r+16,r+16+e)))}get tagsB64Url(){return this.tags.map(r=>({name:Ue.default.encode(r.name),value:Ue.default.encode(r.value)}))}getStartOfData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=tt(e);return r+16+t}get rawData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=tt(e),n=r+16+t;return this.binary.subarray(n,this.binary.length)}get data(){return Ue.default.encode(this.rawData)}getRaw(){return this.binary}async sign(r){return this._id=await vh(this,r),this.rawId}async setSignature(r){this.binary.set(r,2),this._id=rr.Buffer.from(await Ze().hash(r))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(r=>({name:Ue.default.encode(r.name),value:Ue.default.encode(r.value)})),data:this.data}}static async verify(r){if(r.byteLength<Ma)return!1;let e=new on(r),t=e.signatureType,n=e.getTagsStart(),i=tt(r.subarray(n,n+8)),o=r.subarray(n+8,n+16),s=tt(o);if(s>vi)return!1;if(i>0)try{if(gi(rr.Buffer.from(r.subarray(n+16,n+16+s))).length!==i)return!1}catch{return!1}let u=Na[t],l=await mi(e);return await u.verify(e.rawOwner,l,e.rawSignature)}async getSignatureData(){return mi(this)}getTagsStart(){let r=this.getTargetStart(),e=this.binary[r]==1,t=r+(e?33:1),n=this.binary[t]==1;return t+=n?33:1,t}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let r=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return r+=e?32:0,r}},Eh=Ct(wi(),1);function Sh(r,e,t){let n=e.publicKey,i=t?.target?Eh.default.toBuffer(t.target):null,o=1+(i?.byteLength??0),s=t?.anchor?Buffer.from(t.anchor):null,u=1+(s?.byteLength??0),l=(t?.tags?.length??0)>0?Pa(t.tags):null,p=16+(l?l.byteLength:0),m=Buffer.from(r),g=m.byteLength,v=2+e.signatureLength+e.ownerLength+o+u+p+g,S=Buffer.alloc(v);if(S.set(_h(e.signatureType),0),S.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);S.set(n,2+e.signatureLength);let T=2+e.signatureLength+e.ownerLength;if(S[T]=i?1:0,i){if(i.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${i.byteLength}`);S.set(i,T+1)}let E=T+o,B=E+1;if(S[E]=s?1:0,s){if(B+=s.byteLength,s.byteLength!==32)throw new Error("Anchor must be 32 bytes");S.set(s,E+1)}S.set(Oa(t?.tags?.length??0),B);let C=Oa(l?.byteLength??0);S.set(C,B+8),l&&S.set(l,B+16);let N=B+p;return S.set(m,N),new on(S)}var Da={...Ua};globalThis.arbundles??=Da;var $a=Da;var{DataItem:Ah}=$a;globalThis.Buffer||(globalThis.Buffer=xi.Buffer);function Th(r){return async({data:t,tags:n,target:i,anchor:o,createDataItem:s=u=>new Ah(u)})=>{let u=await r.signDataItem({data:t,tags:n,target:i,anchor:o}),l=s(xi.Buffer.from(u));return{id:await l.id,raw:await l.getRaw()}}}var Bh=globalThis.GATEWAY_URL||void 0,Ih=globalThis.MU_URL||void 0,Ch=globalThis.CU_URL||void 0,{result:xw,message:_w,spawn:bw}=ua({GATEWAY_URL:Bh,MU_URL:Ih,CU_URL:Ch});var Ew=sn.createDataItemSigner;export{ua as connect,Ew as createDataItemSigner,_w as message,xw as result,bw as spawn};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

warp-arbundles/build/web/esm/bundle.js:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
